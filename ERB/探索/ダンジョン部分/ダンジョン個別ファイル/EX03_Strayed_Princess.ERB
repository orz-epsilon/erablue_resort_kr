

@ダンジョン初期処理_Strayed_Princess
;ダンジョン構造の読み込み
;0でない時、そのマスは存在する
#DIM 深度
#DIM 分岐

ダンジョンサブタイトル = 迷い込んだ小公女
ダンジョンマス画像URL_伏せ状態 = 壁_森
ダンジョン現在位置:0 = 3
ダンジョン現在位置:1 = 7
ダンジョン背景画像 = 背景_森

;スタート地点は必ず存在
;初期からオープン済みなので3を入れる
;ビット0：存在するか　ビット1：移動できるか　ビット2：マスをオープンするか（ビット１をONにしないと無意味）　ビット3：入れないがオープンする場合に使用
;ビット4以降：自由枠。主に宝箱の開閉やイベント達成フラグなどに使用
IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}") == 0
	SETVAR @"ダンジョン構造配列_%ダンジョン名%:{ダンジョン現在位置:0}:{ダンジョン現在位置:1}", 3
ENDIF

FOR 深度, 1, 100
	LOCAL = 0
	FOR 分岐, 0, 9
		IF GETVAR(@"ダンジョン構造配列_%ダンジョン名%:{深度}:{分岐}")
			;既にマス情報が入ってるなら飛ばす
			LOCAL = 1
			CONTINUE
		ELSEIF ENUMFUNCBEGINSWITH(@"ダンジョンマス情報_%ダンジョン名%_{深度}_{分岐}")
			LOCAL = 1
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:深度:分岐", 1
		ENDIF
	NEXT
	IF LOCAL
		ダンジョン最大深度 = 深度
	ENDIF
NEXT

@ダンジョン解説文_Strayed_Princess

詳細文文字列受け渡し変数 = 
詳細文文字列受け渡し変数 += "산중에 수수께끼의 말 같은 생물을 데리고 있는 산적이 나타났다. <br>"
詳細文文字列受け渡し変数 += "방치하면 리조트 섬의 환경이나 손님에게 큰 피해를 줄 것이다. <br>"
詳細文文字列受け渡し変数 += @"%CALLNAME:PLAYER%은(는) 산적 토벌을 위해 산중으로 향한다. <br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "던전 출처: Violated Princess<br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "<br>"
詳細文文字列受け渡し変数 += "※본 던전에서는 패배 시 에로 이벤트 등은 발생하지 않습니다."

;推奨レベルを返す
RETURN 10

@敵討伐後処理_ダンジョン固有_Strayed_Princess(討伐エネミー数)
#DIM 討伐エネミー数
;ダンジョン内で戦闘した後に呼ばれる関数、主にダンジョンごとのドロップアイテム取得に使用
;今回アイテムドロップはないので記述なし

;---------------------------------------------------------------------
;マップ構造
;---------------------------------------------------------------------
;イベントミニマップなのでほぼ一本道、途中ちょっとだけ分岐
;---------------------------------------------------------------------

@ダンジョンマス情報_Strayed_Princess_3_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_4")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 나무들이 울창하게 우거져 있다.
			CALL 再視聴確認(1)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			WSTR:(K++) = %CALLNAME:PLAYER%은(는) 산적의 배가 내린 산으로 발을 들여놓았다.
			WSTR:(K++) = 울창하게 우거진 숲속에서는 언제 산적들과 마주칠지 모른다. 조심해서 나아가자.
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_3_4(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 4

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_2")
	CASE "マスイベント"
		KSTR:(K++) = 땅에 사람의 작은 발자국이 있다. 아이의 것일까.
		KSTR:(K++) = 아무것도 모르는 리조트 손님이 먼저 나아가고 있다면 귀찮다. 서두르자.
		CALL 接続ルート全開放処理(マス深度, マス分岐)
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_3_2(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 2

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "3_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 산적과 싸웠던 장소다.
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),100,,,1,1)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗",101)
			LOCALS:1 = %立ち絵リソース記録%
			WSTR:(K++) = 숲속으로 나아가고 있는데, 나무들 사이로 산적으로 보이는 여러 남자들이 보인다.
			WSTR:(K++) = 무언가를 찾고 있는지, 주변을 두리번거리고 있지만……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「어? 뭐야 너희들!? 그 꼬맹이 동료냐!?」
			CALL メッセージ欄表示用関数(LOCALS:1,"野盗",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 아무래도 저쪽도 이쪽의 존재를 눈치챈 것 같다.
WSTR:(K++) = 산적이 나이프를 한 손에%CALLNAME:PLAYER%들에게 덮쳐왔다!
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_산적
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_산적
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 3
				ダンジョン現在位置:1 = 4
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;勝利後or読み返し中
			WSTR:(K++) = 산적을 물리쳤다.
			WSTR:(K++) = 『그 꼬마』라는 말로 보아, 역시 아까의 발자국은 리조트 손님의 것일까…?
			WSTR:(K++) = 어쨌든, 서두르는 편이 좋을 것 같다.
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:3:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:3:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_3_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 3
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 11
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(11, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_11_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 3
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_11_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			WSTR:(K++) = 사내들의 고함 소리가 들린다…
			WSTR:(K++) = 아까 그 산적의 동료일 것이다。%CALLNAME:PLAYER%들은 소리가 나는 방향으로 발걸음을 옮겼다.
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 사람의 발자국이 여러 개 남아있다.
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT




@ダンジョンマス情報_Strayed_Princess_11_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "11_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 산적과 세레나가 싸우던 장소다.
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",102,,,"暗闇掛け")
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗",103)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗1",104,,,"怒りマーク")
			LOCALS:2 = %立ち絵リソース記録%
			WSTR:(K++) = 이것은 전투음일까? 사내들의 고함 소리에 섞여, 무언가가 충돌하는 듯한 소리가 들려왔다.
			WSTR:(K++) = 어쩌면 리조트 손님이 아니라, 산적 토벌을 온 기공사나 무언가일지도 모른다. 다가가 보자.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「젠장! 이런 꼬마 한 마리에게 뭘 꾸물거리고 있어! 뭐야 너희들은!」
			CALL メッセージ欄表示用関数(LOCALS:1,"野盗A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「이름을 밝힌다 한들 너희들에게는 알 리 없다. 용건도…… 말할 필요는 없겠군」
			CALL メッセージ欄表示用関数(LOCALS,"金髪の少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「잘난 척하는 망할 꼬마가! 후회해도 이미 늦었어!!」
			CALL メッセージ欄表示用関数(LOCALS:2,"野盗B",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 가까이 다가가 보니, 한 명의 금발 소녀가 여러 명의 산적과 대치하며 싸우고 있었다.
			WSTR:(K++) = 소녀가 주먹을 휘두를 때마다 산적의 몸이 공중으로 날아오르고 있다. 마력을 날리고 있는 것일까?
			WSTR:(K++) = 산적이 휘두르는 나이프에 대해서도 경쾌한 스텝으로 트윈테일을 꼬리처럼 흔들며 피하고 있다.
			WSTR:(K++) = 그렇다고는 해도, 산적의 수가 많다. 소녀에게 가세해야 할 것이다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「이번엔 또 뭐야!?」
			CALL メッセージ欄表示用関数(LOCALS:1,"野盗A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「음……!?」
			CALL メッセージ欄表示用関数(LOCALS,"金髪の少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%들은 산적에게 덤벼들었다!
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_野盗
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_野盗
			敵BATTLE_STATE_STR:4:エネミー名 = Lv10_野盗
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 11
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",105,,,"暗闇掛け")
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",106)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_驚き",107)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_悲しみ",108)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_目瞑り",109)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_苦笑",110)
			LOCALS:5 = %立ち絵リソース記録%
			WSTR:(K++) = 「미안하다, 살았다」
			CALL メッセージ欄表示用関数(LOCALS,"金髪の少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 산적을 물리친 후, 금발 소녀가 이쪽으로 다가와 말을 걸어왔다.
			WSTR:(K++) = 소녀의 모습을 다시 보니, 매우 작다. 드라프족 여성과 비슷한 키다.
			WSTR:(K++) = 우선, %CALLNAME:PLAYER%는 그녀에게 자기소개를 하기로 했다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「이 섬을 관리하는 오너님이신가. 인사가 늦었다」
			CALL メッセージ欄表示用関数(LOCALS,"金髪の少女",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「나는 세레나 푸오……세레나다. 잘 부탁한다」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 세레나라고 자칭하는 소녀에게, 산적 토벌을 위해 왔다는 뜻을 설명한다.
			WSTR:(K++) = 조용히 이야기를 듣던 세레나는, 산적이 의문의 일각수를 데리고 있다는 이야기를 듣자, 눈을 크게 뜨고 당황했다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「그 이야기는 사실인가!?」
			CALL メッセージ欄表示用関数(LOCALS:2,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　……윽, 미안하다. 보기 흉한 모습을 보이고 말았다」
			CALL メッセージ欄表示用関数(LOCALS:3,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 어렴풋이 짐작하고 있었지만, 역시 사정이 있는 듯하다.
			WSTR:(K++) = %CALLNAME:PLAYER%는 왜 여기에 있는지 묻기로 했다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「오너님께는 이야기를 해야 할까.
			WSTR:(K++) = 　실은, 어떤 이유로 유니콘을 찾고 있다」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 세레나의 설명에 따르면, 집에서 기르던 유니콘의 아이가 누군가에게 납치당한 듯하다.
			WSTR:(K++) = 홀로 뛰쳐나온 그녀는, 소문이나 미미한 흔적 등을 따라 이 섬으로 끌려왔다는 정보를 얻어, 여기까지 추적했다고 한다.
			WSTR:(K++) = 하지만, 이 일은 하인이나 기공사에게 맡겨야 하는 것이 아닐까.
			WSTR:(K++) = 세련된 몸가짐에, 소중히 가꾸어졌다는 것을 한눈에 알 수 있는 용모. 그녀는 틀림없이, '사용하는 쪽'의 존재다.
			WSTR:(K++) = 아마 부모님도 세레나가 혼자 유니콘을 쫓아 집을 나서는 것을 승낙하지 않았을 것이다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「오너님의 말씀은 전적으로 옳다. 나 자신도, 그렇게 해야 한다고 생각한다.
WSTR:(K++) = 　누가 들어도 바보 같은 짓을 하고 있다고 말할 것이다.
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 　하지만, 그 아이는……스플렌도르는 나에게 유일무이한, 단 한 명의 친구인 것이다.
WSTR:(K++) = 　내가 모르는 곳에서 끔찍하고, 심한 일을 당하고 있다고 생각하면……」
			CALL メッセージ欄表示用関数(LOCALS:3,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 비장한 표정을 지으며 설명하는 세레나.
WSTR:(K++) = 하지만, 산적은 세레나의 사정을 헤아려주지 않는다. 만약 잡히면, 세레나 정도의 소녀라면 죽음보다 더 괴로운 고통을 맛볼 것이다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
WSTR:(K++) = 「그것을 각오한 것이다. 분명 이 순간에도, 그 아이는 나를 부르고 있을 것이다.
WSTR:(K++) = 　그 목소리에 응하기 위해, 나는 지금 여기에 있다.
WSTR:(K++) = 　이 판단이 아무리 어리석고 불합리해도. 아무리 틀렸다고 해도.
			CALL メッセージ欄表示用関数(LOCALS:4,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 　나는, 나의 선택을 지지할 것이다」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 그렇게 단언하며, 결의를 담은 표정을 짓는 세레나. 아마, 무슨 말을 해도 한 발짝도 물러서지 않을 것이다.
WSTR:(K++) = 게다가 세레나를 방치한 결과, 그녀가 산적에게 능욕당하는 일이 생긴다면 잠자리가 편치 않을 것이다.
WSTR:(K++) = %CALLNAME:PLAYER%는 산적 토벌을 함께 하지 않겠냐고 제안했다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
WSTR:(K++) = 「나와 우리 집안의 문제이므로, 다른 사람을 개입시킬 생각은 없다.
			CALL メッセージ欄表示用関数(LOCALS:4,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 　라고 말하고 싶지만, 섬을 황폐하게 만드는 산적의 존재는 오너님에게도 남의 일이 아니다.
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
WSTR:(K++) = 　……사실을 말하자면, 집을 나선 후 혼자라서 불안했다.
			WSTR:(K++) = 　도와주신다면 이보다 더 감사할 일은 없습니다. 잘 부탁드립니다, 오너님」
			CALL メッセージ欄表示用関数(LOCALS:5,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 이야기는 결정되었다.
			WSTR:(K++) = %CALLNAME:PLAYER%와 세레나는, 산적들의 발자국을 쫓아 발걸음을 옮기기 시작했다.
			
			
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:11:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:11:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_11_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(19, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 11
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_19_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",111)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_笑顔",112)
			LOCALS:1 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「스플렌도르에 대해 묻고 싶다고? 그렇군……
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　그 아이는 내가 직접 먹여주지 않으면 당근 한 개도 먹지 않고, 내가 쓰다듬어 재워주지 않으면 밤새도록 울어.
			WSTR:(K++) = 　내가 피아노를 치고 있으면 옆에서 뛰어놀고, 내가 꾸중을 듣고 울고 있으면, 그 아이는 옆에 있어주어서――」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 세레나는 부드러운 미소로 유니콘에 대해 이야기하고 있다.
			WSTR:(K++) = 조금 전까지의 당당한 모습과는 달리, 나이에 걸맞은 귀여운 소녀의 모습이 그곳에 있었다.
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 사람의 발자국이 여러 개 남아있다.
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 19
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "19_0")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 산적과 싸웠던 장소다.
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",113)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_悲しみ",114)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_怒り",115)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗",116)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗1",117)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗2",118)
			LOCALS:5 = %立ち絵リソース記録%
			WSTR:(K++) = 세레나와 잡담하며 앞으로 나아가고 있는데, 산적 무리가 나타났다.
			WSTR:(K++) = 이미 %CALLNAME:PLAYER%들이 산적을 쓰러뜨리고 있다는 정보가 전해진 것인지, 무기를 들고 살기등등해 있다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「얕잡아 보는 짓을 하는군…… 살아서 돌아갈 생각 마라 너희들!」
			CALL メッセージ欄表示用関数(LOCALS:3,"野盗A",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「기다려 봐, 잘 보니 얼굴 좋은 암컷들뿐이잖아.
			WSTR:(K++) = 　마음껏 박을 수 있는 변기로 늘어놓고 범해버리자고」
			CALL メッセージ欄表示用関数(LOCALS:4,"野盗B",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「그거 좋지! 나는 저 금발 꼬맹이랑 하고 싶어!
			WSTR:(K++) = 　재미없는 몸이지만, 쓰레기 같은 씨앗으로 임신시켜 주마!
			WSTR:(K++) = 　지금까지의 변기는 최고로 『3마리』였던가?」
			CALL メッセージ欄表示用関数(LOCALS:5,"野盗C",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「바보야, 저런 꼬맹이는 1마리 낳으면 망가져 버려.
			WSTR:(K++) = 　뭐, 망가지면 망가지는 대로 좋은 본보기가 되겠지. 갸하하하하!!」
			CALL メッセージ欄表示用関数(LOCALS:3,"野盗A",,0)
			CALL 口上変数初期化
			;男やケモオンリーのパーティーだと野盗の台詞が矛盾するか野盗が特殊性癖になるけどまあいいか！よろしくなあ！
			WSTR:(K++) = 산적은 저열한 말을 뱉으며 저속한 웃음소리를 내고 있다.
			WSTR:(K++) = 세레나도 눈살을 찌푸리며 차가운 눈으로 산적을 향하고 있었다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「듣기 역겹군.
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　가자, 오너님!」
			CALL メッセージ欄表示用関数(LOCALS:2,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%들은 산적에게 공격해 들어갔다!
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv10_산적
			敵BATTLE_STATE_STR:3:エネミー名 = Lv10_산적
			敵BATTLE_STATE_STR:4:エネミー名 = Lv10_산적
			敵BATTLE_STATE_STR:7:エネミー名 = Lv10_산적
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 19
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_笑顔",119)
			LOCALS = %立ち絵リソース記録%
			WSTR:(K++) = 산적을 쓰러뜨렸다. 세레나에게도 특별히 다친 곳은 없는 것 같다.
			WSTR:(K++) = 소녀가 듣기에는 정신적으로 힘들 것 같은 말을 들었음에도 불구하고, 딱히 힘들어하는 기색은 없어 보인다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「아아, 나에 대해서는 걱정하지 않아도 괜찮아.
			WSTR:(K++) = 　나는 아기라는 것은 사랑과 행복에 의해 태어나는 것이라고 얼마 전 이 눈으로 확인했다.
			WSTR:(K++) = 　그 정도의 잡담, 신경 쓸 것도 없어」
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = ……아무래도, 세레나는 성에 관해서는 거의 무지한 데다 지식이 상당히 편향되어 있는 것 같다.
			WSTR:(K++) = 어리다고는 하지만, 왕후귀족으로 보이는 그녀의 본가의 성교육은 어떻게 되어 있는 걸까.
			WSTR:(K++) = 약간의 찜찜함을 안은 채, %CALLNAME:PLAYER%은(는) 먼저 나아가기로 했다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
			LOCAL = GETVAR(@"ダンジョン構造配列_%ダンジョン名%:19:0")
			SETBIT LOCAL, 1
			SETBIT LOCAL, 2
			CLEARBIT LOCAL, 3
			SETVAR @"ダンジョン構造配列_%ダンジョン名%:19:0", LOCAL
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_19_0(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 11
マス分岐 = 0

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 上アイコン
	CASE "接続先"
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 27
		ダンジョン現在位置:1 = 7
		;移動直後はマスイベント発動しないので、移動先のマス開放をここで行う
		CALL 踏破マス開放処理
		CALL 接続ルート全開放処理(27, 7)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_27_7(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 7

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 下アイコン
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_5")
	CASE "マスイベント"
		;移動先Yと移動先Yを、移動先の位置に変更すること
		ダンジョン現在位置:0 = 19
		ダンジョン現在位置:1 = 0
		CALL 画面再描画
ENDSELECT



@ダンジョンマス情報_Strayed_Princess_27_5(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 5

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_3")
	CASE "マスイベント"
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_笑顔",120)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_悲しみ",121)
			LOCALS:1 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「리조트에는 목욕이나 수영을 위한 시설이 있구나.
			WSTR:(K++) = 　나는 이번에 처음으로 집에서 나왔으니, 조금 흥미가 있어.
			WSTR:(K++) = 　참고로, 갈아입을 때 시종은 몇 명 붙어?」
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　――그, 그렇구나. 혼자 하는 게 보통인가. 이상한 걸 물어봤네」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 세레나는 뼛속까지 온실 속 화초 아가씨인 것 같다. 이번 일이 해결되면, 리조트에 초대해도 좋을지도 모른다.
			WSTR:(K++) = 조금 긴장이 풀렸지만, 슬슬 산적 보스가 나올지도 모른다. %CALLNAME:PLAYER%은(는) 다시 기합을 넣었다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ELSE
			KSTR:(K++) = 사람의 발자국이 여러 개 남아 있다.
		ENDIF
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT


@ダンジョンマス情報_Strayed_Princess_27_3(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 3

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = エネミーアイコン_赤
	CASE "接続先"
		CALL ダンジョン分岐線描画(@"{マス深度}_{マス分岐}", "27_1")
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 산적 보스와 싸웠던 장소다.
			CALL 再視聴確認(0)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_怒り",122)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",123)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_野盗ボス",124)
			LOCALS:2 = %立ち絵リソース記録%
			WSTR:(K++) = 앞으로 나아가자 숲이 트인 곳에 도착했다.
			WSTR:(K++) = 광장 중앙에는 피부가 검은 남자와 옆으로 누워있는 작은 일각수가 있다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = "스플렌도르!"
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = "……투명한 금발에 하얀 피부. 흥, 과연?"
			WSTR:(K++) = 너희들이 나에게 싸움을 걸어왔다는 녀석들인가"
			CALL メッセージ欄表示用関数(LOCALS:2,"野盗のボス",,0)
			CALL 口上変数初期化
			WSTR:(K++) = "……자기 편의대로만 사물을 보는 남자다. 스플렌도르에게 무슨 짓을 한 거야!"
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = "시끄러운 꼬마로군.
			WSTR:(K++) = 날뛰어서 약으로 조금 재우고 있을 뿐이다. 팔 물건이 아니었다면 당장 살처분하고 싶을 정도다…… 뭐 됐다"
			CALL メッセージ欄表示用関数(LOCALS:2,"野盗のボス",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 남자의 말투로 보아, 이 녀석이 산적의 보스일 것이다.
			WSTR:(K++) = 유니콘을 거래하기 위해서인가, 아니면 휴식을 위해 이 섬에 내려온 것일까. 남에게 폐를 끼치는 이야기다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = "쓸모없는 부하를 처리한 것은 아무래도 좋지만, 너희들의 행위는 나에 대한 선전포고로 받아들였다.
			WSTR:(K++) = 너는 가냘픈 몸을 하고 있지만, 입가심으로는 그것도 좋겠지.
			WSTR:(K++) = 남자는 죽고, 여자는 내 아이를 배고 가라"
			CALL メッセージ欄表示用関数(LOCALS:2,"野盗のボス",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 무허가로 이 섬에 착륙한 데다, 말도 안 되는 소리만 하는 남자다. 불거진 사타구니가 매우 역겹다.
			WSTR:(K++) = 이 남자를 여기서 처치하지 않으면, 리조트에 큰 재앙을 가져올 것이다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「흥, 어디까지나 자기 편의만 말하는 남자군.
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　좋다, 겸손함이 왜 미덕으로 여겨지는지, 네놈의 오체에 교육시켜주마」
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = %CALLNAME:PLAYER%들은 산적 보스에게 덤벼들었다!
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化

		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 1)
			;戦闘部分
			敵BATTLE_STATE_STR:0:エネミー名 = Lv15_산적 보스
			CALL 雑魚敵遭遇汎用処理
			IF RESULT != 0 && GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
				CALL マス未踏破戻し処理(ダンジョン現在位置:0, ダンジョン現在位置:1)
				ダンジョン現在位置:0 = 27
				ダンジョン現在位置:1 = 5
				RETURN 0
			ENDIF
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CALL 接続ルート全開放処理(マス深度, マス分岐)
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT







@ダンジョンマス情報_Strayed_Princess_27_1(ARGS)
#DIM マス深度
#DIM マス分岐
マス深度 = 27
マス分岐 = 1

SELECTCASE ARGS
	CASE "マス画像"
		ダンジョンマス画像URL = 床_草原

		ダンジョンマス画像URL_重ね表示 = 会話アイコン
	CASE "接続先"
	CASE "マスイベント"
		RFLAG:ダンジョン再視聴フラグ = 0
		IF 初来訪マス判定用フラグ
			;最初に訪れた時
			SETBIT RFLAG:ダンジョン再視聴フラグ, 0
			SETBIT RFLAG:ダンジョン再視聴フラグ, 1
			SETBIT RFLAG:ダンジョン再視聴フラグ, 10
		ELSE
			KSTR:(K++) = 문제를 해결하고, 새로운 리조트의 고객을 확보했다.
			CALL 再視聴確認(1)
		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 0)
			;立ち絵リソース記録に必要な画像のリソースを生成する
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_涙",125)
			LOCALS = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_涙1",126)
			LOCALS:1 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_笑顔",127)
			LOCALS:2 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_悲しみ",128)
			LOCALS:3 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_基本",129)
			LOCALS:4 = %立ち絵リソース記録%
			CALLF 任意顔グラ表示用文字列関数(キャラ検索("[グラツィア大公家の小公女]セレナ"),"ダンジョン用_苦笑",130)
			LOCALS:5 = %立ち絵リソース記録%
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 산적 보스를 쓰러뜨렸다. 주위를 둘러보니, 세레나는 쓰러져 있는 유니콘 곁으로 달려가고 있다.
			WSTR:(K++) = 세레나가 걱정스러운 듯 몇 번 유니콘을 쓰다듬자, 유니콘의 눈이 천천히 떠졌다.
			WSTR:(K++) = 곁에 있는 것이 자신의 본래 주인임을 인식한 것인지, 유니콘은 작은 소리로 울며, 세레나에게 어리광 부리듯 몸을 기대고 있다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「아아, 스플렌도르…… 스플렌도르……!
			CALL メッセージ欄表示用関数(LOCALS,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　드디어, 드디어 만났어…… 나의 광채……!」
			CALL メッセージ欄表示用関数(LOCALS:1,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 세레나는 눈물을 흘리며 유니콘을 끌어안고 있다.
			WSTR:(K++) = 감동적인 재회를 방해하지 않도록 말없이 잠시 지켜보고 있자, 세레나가 이쪽으로 몸을 돌렸다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「고마워요, 오너님.
			WSTR:(K++) = 　당신의 도움 덕분에, 이렇게 스플렌도르와 재회할 수 있었어요」
			CALL メッセージ欄表示用関数(LOCALS:2,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 이쪽으로 감사를 전하는 세레나지만, 보아하니 아직 문제는 남아있다.
			WSTR:(K++) = 야도 관리가 엉성했던 건지, 아니면 익숙지 않은 환경에 정신적으로 지친 건지, 유니콘이 쇠약해진 것처럼 보인다.
			WSTR:(K++) = 바로 기공정에 태워 장거리 여행을 시키는 것은 위험할지도 모른다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「확실히, 집에 있을 때보다 말라 있다.
			WSTR:(K++) = 　요양시킬 필요가 있겠군, 인가」
			CALL メッセージ欄表示用関数(LOCALS:3,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 그래서, %CALLNAME:PLAYER%는 유니콘을 당분간 리조트에서 요양시키지 않겠냐고 제안했다.
			WSTR:(K++) = 리조트는 각국의 왕족도 애용하는 곳이니, 요양에는 최고의 환경일 것이다.
			WSTR:(K++) = 순결한 처녀에게만 길들여진다는 문제도, era의 힘이 있다면 어떻게든 될 것이다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「나로서는 더할 나위 없는 제안이지만, 정말 괜찮은가?」
			CALL メッセージ欄表示用関数(LOCALS:4,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 본능에 호소하는 무의식적인 매력을 가진 세레나와, 그녀의 본가에 은혜를 파는 것은 나쁘지 않다.
			WSTR:(K++) = 그런 흑심이 담긴 제안이지만, 순수하고 순진한 그녀는 거기까지 간파하지 못한 듯했다.
			WSTR:(K++) = 세레나는 쓴웃음을 지으며, 이쪽 얼굴을 응시하고 있다.
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = 「……이 섬에 오고 나서 신세만 지고 있다. 그 호의에는 솔직히 감사를 표하겠다.
			CALL メッセージ欄表示用関数(LOCALS:5,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 　앞으로도 잘 부탁한다, 오너님」
			CALL メッセージ欄表示用関数(LOCALS:2,"セレナ",,0)
			CALL 口上変数初期化
			WSTR:(K++) = 어쨌든, 야도 문제는 일단락되었다.
			WSTR:(K++) = 우선, 유니콘 사육법에 대해 자세히 알아볼 필요가 있을 것이다.
			WSTR:(K++) = %CALLNAME:PLAYER%은(는) 유니콘을 돌보는 방법에 대해, 셀레나에게 물어보면서 왔던 길을 되돌아가기 시작했다……
			CALL メッセージ欄表示用関数(,,,0)
			CALL 口上変数初期化
			WSTR:(K++) = [그라치아 대공가의 소공녀]셀레나가 리조트를 방문하게 되었다!

		ENDIF
		IF GETBIT(RFLAG:ダンジョン再視聴フラグ, 10)
			;再視聴では通らない報酬部分
			CFLAG:(キャラ検索("[グラツィア大公家の小公女]セレナ")):招待不可フラグ = 0
			
			;再視聴では通らない報酬部分
			CFLAG:(キャラ検索("[グラツィア大公家の小公女]セレナ")):招待不可フラグ = 0

			IF 滞在キャラ上限 - 滞在キャラ数 - 集客人数 - FLAG:滞在キャラ枠先確保分 > 0
				解放キャラ招待:(FINDELEMENT(解放キャラ招待, 0)) = キャラ検索("[グラツィア大公家の小公女]セレナ")
				FLAG:滞在キャラ枠先確保分 += 1
			ENDIF
			ダンジョン終了状況 = 踏破達成
			ダンジョンクリアフラグ_Strayed_Princess = 1
		ENDIF
		RFLAG:ダンジョン再視聴フラグ = 0
		CALL メッセージ欄表示用関数(,,,0)
		CALL 画面再描画
ENDSELECT

