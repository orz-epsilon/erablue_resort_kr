
@イベント_リゾート島開拓作業_ランダム_旅の僧侶
#DIM 回復量

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특히 별다른 점은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하던 중, 섬 개척 의뢰를 받은 기공사와 만났다.
	WSTR:(K++) = 기공사는 승려를 본업으로 삼고 있으며, 의뢰를 받아 노자돈을 벌면서 여행하고 있는 듯하다.
	KSTR:(K++) = 승려는 호의로 회복 마법을 사용하여, 너희의 상처를 치유해 주었다!
	;HPバーの表示タイミングを調整するためここで一旦メッセージ表示
	CALL メッセージ欄表示用関数()
	CALL 口上変数初期化
	
	回復量 = ダンジョン階層記録 * 50
	WSTR:(K++) = 모두의 HP가 {回復量, 4} 회복되었다!
	CALL 探索中全体回復_ＨＰ(回復量)
	WSTR:(K++) = %CALLNAME:MASTER%들은 승려에게 감사를 표하고, 탐색으로 돌아갔다.
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_修行中の格闘家
#DIMS 素材名

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특히 별다른 점은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하던 중, 섬 개척 의뢰를 받은 기공사와 만났다.
	WSTR:(K++) = 기공사는 격투가로, 육체 단련을 위해 여러 의뢰를 받고 있는 듯하다.
	KSTR:(K++) = 격투가는 움직임이 둔해진다며, 너무 많이 사냥한 마물 소재를 %CALLNAME:MASTER%들에게 나눠주었다!_PAGE

	素材名 = %ランダム素材名("エネミー素材", RAND(1, 2))%
	WSTR:(K++) = %素材名%을(를) 3개 손에 넣었다!
	WSTR:(K++) = %CALLNAME:MASTER%들은 격투가에게 감사를 표하고, 탐색으로 돌아갔다.
	CALL 素材入手処理(素材名, 3)
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_見習い戦士
#DIM 経験値量
#DIM レベルアップフラグ

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특히 별다른 점은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하던 중, 섬 개척 의뢰를 받은 기공사와 만났다.
	WSTR:(K++) = 기공사는 아직 견습 전사로, 마물과의 싸움으로 강해지기 위해 의뢰를 받고 있는 듯하다.
	WSTR:(K++) = 견습생답게, 곳곳에서 움직임이 위태롭다……
	KSTR:(K++) = %CALLNAME:MASTER%들은 견습 전사에게 조언과 간단한 훈련을 시켜주었다._PAGE

	経験値量 = ダンジョン階層記録 * 100
	WSTR:(K++) = 견습 전사는 기뻐하며%CALLNAME:MASTER%들에게 감사를 표하고, 탐색으로 돌아간다.
	WSTR:(K++) = %CALLNAME:MASTER%들은 타인에게 전투의 요령을 가르쳐주어{経験値量, 4}의 경험치를 얻었다！
	
	レベルアップフラグ = 0
	FOR LOCAL, 0, 14
		SIF LOCAL > 3 && LOCAL < 10
			CONTINUE
		SIF BATTLE_STATE:LOCAL:キャラ登録番号 < 1
			CONTINUE
		基礎BATTLE_STATE:(BATTLE_STATE:LOCAL:キャラ登録番号):蓄積EXP += 経験値量
		CALL レベルアップ処理(BATTLE_STATE:LOCAL:キャラ登録番号)
		SIF レベルアップフラグ < RESULT
			レベルアップフラグ = RESULT
	NEXT
	IF レベルアップフラグ
		;ステータス代入
		CALL 戦闘初期処理_味方
	ENDIF

	CALL メッセージ欄表示用関数(,,,0)
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_ベテラン吟遊詩人

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특별히 달라진 점은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하고 있을 때, 섬 개척 의뢰를 받은 기공사와 만났다.
	WSTR:(K++) = 기공사는 베테랑 음유시인으로, 노래 소재를 찾기 위해 기공사 일과 겸업하고 있다고 한다.
	WSTR:(K++) = 여기서 만난 것도 인연이라며, 음유시인은 한 곡을 연주하며 노래를 들려주었다.
	WNSTR:(K++) = …………
	KSTR:(K++) = 훌륭한 노래다！　%CALLNAME:MASTER%들의 몸에 활력이 솟아난다！

	;HPバーの表示タイミングを調整するためここで一旦メッセージ表示
	CALL メッセージ欄表示用関数()
	CALL 口上変数初期化
	
	WSTR:(K++) = 모두의 오의 게이지가 ３０％ 증가했다！
	CALL 探索中全体回復_奥義ゲージ(30)
	WSTR:(K++) = %CALLNAME:MASTER%들은 음유시인에게 감사를 표하고, 탐색으로 돌아갔다.
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_さすらいの料理人

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특별히 달라진 점은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하고 있을 때, 섬 개척 의뢰를 받은 기공사와 만났다.
	WSTR:(K++) = 기공사는 떠돌이 요리사로, 새로운 요리 레시피를 찾아 기공사 일을 하고 있는 듯하다.
	KSTR:(K++) = 요리사는 모처럼이니라며,%CALLNAME:MASTER%들에게 요리 레시피를 가르쳐주었다！_PAGE

	CALL レシピランダム取得処理()
	IF RESULT == -1
		;レシピ全部知ってる場合
		WSTR:(K++) = 하지만, %CALLNAME:MASTER%들은 모든 레시피를 알고 있는 것 같다……
	ELSE
		WSTR:(K++) = %RESULTS%의 레시피를 배웠다!
	ENDIF
	WSTR:(K++) = %CALLNAME:MASTER%들은 요리사에게 감사를 표하고, 탐색으로 돌아갔다.
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_休憩出来る地形
#DIM 回復量
#DIM 対象キャラ

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특별히 달라진 모습은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하고 있는데, 광장처럼 탁 트인 장소에 나왔다.
	KSTR:(K++) = 마물이 다가오면 바로 알 수 있는 지형이다. 모처럼이니 잠시 쉬어가자.
	;HPバーの表示タイミングを調整するためここで一旦メッセージ表示
	CALL メッセージ欄表示用関数()
	CALL 口上変数初期化
	
	回復量 = ダンジョン階層記録 * 25
	WSTR:(K++) = 모두의 HP가{回復量, 4}회복되었다!
	CALL 探索中全体回復_ＨＰ(回復量)
	
	対象キャラ = 味方ランダム選出_陥落済み()

	IF 対象キャラ > -1
		WSTR:(K++) = 덤으로, %CALLNAME:MASTER%는 %CALLNAME:(BATTLE_STATE:対象キャラ:0)%와 함께 잠시 '휴식'을 취했다.
		WSTR:(K++) = ZP을(를) 5 얻었다!
		FLAG:ZP所持量 += 5
	ENDIF
	WSTR:(K++) = %CALLNAME:MASTER%들은 휴식을 마치고, 탐색으로 돌아갔다.
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画

@イベント_リゾート島開拓作業_ランダム_晶石の採掘場
#DIM 採掘済みフラグ

CALL 口上変数初期化
IF ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 == "イベント完了"
	KSTR:(K++) = 특별히 달라진 모습은 없다.
	CALL メッセージ欄表示用関数(,,,0)
ELSE
	;最初に訪れた時
	採掘済みフラグ = 0
	WSTR:(K++) = %CALLNAME:MASTER%들이 탐색하고 있는데, 정석이 노출된 암벽을 발견했다.
	WSTR:(K++) = 여기서 채굴을 하면 정석을 얻을 수 있겠지만, 하지만 소리를 들은 마물이 습격해올지도 모른다.
	$採掘ループ
	KSTR:(K++) = 어떻게 할까?
	KSTR:(K++) = BUTTON_[채굴을 한다]
	KSTR:(K++) = BUTTON_[이곳을 떠난다]
	CALL メッセージ欄表示用関数(,,,0)
	CALL 口上変数初期化
	$LOOP_MESSAGE
	BINPUTS
	SELECTCASE RESULTS
		CASE "[採掘を行う]"
			WSTR:(K++) = 약간의 위험은 문제없다. 채굴하자.
			WSTR:(K++) = …………
			SELECTCASE RAND:(5 - 採掘済みフラグ)
				CASE 0
					KSTR:(K++) = …………채굴 소리를 들은 마물이, 너희를 습격해왔다!
					CALL メッセージ欄表示用関数()
					CALL 口上変数初期化
					
					CALL ランダムエネミーセット関数(4, ダンジョン階層記録)
					SIF ランダムダンジョン中加護 != ""
						戦闘時_特殊処理フラグ '= ランダムダンジョン中加護
					CALL 雑魚敵遭遇汎用処理
					
					IF RESULT == 0
						WSTR:(K++) = 마물을 무사히 토벌했지만, 전투의 여파로 주변의 정석이 부서져 버렸다.
						WSTR:(K++) = 바위를 파고들면 아직 발견될지도 모르지만, 그렇게 대규모적인 채굴을 할 시간은 없다.
						WSTR:(K++) = 아쉽지만, 탐색으로 돌아가자.
					ELSEIF RESULT == -1
						WSTR:(K++) = 마물로부터 무사히 도망쳤다.
						WSTR:(K++) = 당분간 그곳에는 마물이 어슬렁거리고 있을 것이다.
						WSTR:(K++) = 아쉽지만 돌아가는 것은 위험하다. 탐색으로 돌아가자.
					ENDIF
				CASEELSE
					WSTR:(K++) = …………훌륭한 정석을 파낼 수 있었다!　%CALLNAME:PLAYER%들은 성정괴를 하나 손에 넣었다.
					WSTR:(K++) = 자, 아직 주위에는 정석이 남아있지만……
					採掘済みフラグ ++
					GOTO 採掘ループ
			ENDSELECT
		CASE "[この場を離れる]"
			IF 採掘済みフラグ
				WSTR:(K++) = 이 이상의 채굴은 위험할 것이다.
			ELSE
				WSTR:(K++) = 위험을 무릅쓰고까지 채굴을 할 필요도 없다.
			ENDIF
			WSTR:(K++) = %CALLNAME:PLAYER%들은 이곳을 떠나, 탐색으로 돌아갔다.
		CASEELSE
			CLEARLINE 1
			REUSELASTLINE  
			GOTO LOOP_MESSAGE
	ENDSELECT
	CALL メッセージ欄表示用関数(,,,0)
	
	CALL 接続ルート全開放処理((ダンジョン現在位置:0), (ダンジョン現在位置:1))
	ランダムダンジョン配列:(ダンジョン現在位置:0):(ダンジョン現在位置:1):イベント状態 = イベント完了
	CALL 口上変数初期化
ENDIF
CALL 画面再描画
