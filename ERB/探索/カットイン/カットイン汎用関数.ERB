
@簡易アニメ作成(アニメフレームID,画像ID,横位置,縦位置,倍率,透明度)
;座標、拡大縮小の入力サポート
#DIM アニメフレームID
#DIM 画像ID
#DIM 横位置
#DIM 縦位置
#DIM 倍率
#DIM 透明度
#DIM レイヤー番号
レイヤー番号 = 50

CALL カットイン用カラーマトリクス取得(透明度)
GDRAWG レイヤー番号 + アニメフレームID, レイヤー番号 + 20 + 画像ID, GWIDTH(レイヤー番号 + アニメフレームID) * 横位置 / 100, GHEIGHT(レイヤー番号 + アニメフレームID) * 縦位置 / 100, GWIDTH(レイヤー番号 + アニメフレームID) * 倍率 / 100, GHEIGHT(レイヤー番号 + アニメフレームID) * 倍率 / 100, 0, 0, GWIDTH(レイヤー番号 + 20 + 画像ID), GHEIGHT(レイヤー番号 + 20 + 画像ID), カットイン用カラーマトリクス:0:0


@グラフィックトリミング(レイヤー番号, 目標横幅, 目標縦幅)
#DIM 目標横幅
#DIM 目標縦幅
#DIM レイヤー番号
;TEMP_gID 作業用レイヤー
;任意のサイズの画像を目的のサイズに加工。目標アスペクト比に合わせて両端から切り取る。
;GRAPHICデータのまま取り扱いたいとき向け

;なんかの間違いで存在しないグラフィック指定してたら戻る
SIF GCREATED(レイヤー番号) == 0
	RETURN 0

;どちらが余っているかを判断する処理
IF 100 * 目標横幅 / 目標縦幅 > 100 * GWIDTH (レイヤー番号) / GHEIGHT(レイヤー番号)
	;目的アス比が元のアス比より横に長い場合、元の画像は縦を（）切り取る
	GDISPOSE TEMP_gID
	GCREATE TEMP_gID, GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号)
	GDRAWG TEMP_gID, レイヤー番号, 0, GHEIGHT(レイヤー番号) - (GWIDTH (レイヤー番号) * 目標縦幅 / 目標横幅), GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号), 0, (GHEIGHT(レイヤー番号) - (GWIDTH (レイヤー番号) * 目標縦幅 / 目標横幅)) / 2, GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号)

	GDISPOSE レイヤー番号
	GCREATE レイヤー番号, 目標横幅, 目標縦幅
	GDRAWG レイヤー番号, TEMP_gID, 0, 0, 目標横幅, (GHEIGHT(TEMP_gID) * 目標横幅 / GWIDTH (TEMP_gID)), 0, GHEIGHT(TEMP_gID) - (GWIDTH (TEMP_gID) * 目標縦幅 / 目標横幅), GWIDTH (TEMP_gID), GHEIGHT(TEMP_gID)

ELSEIF 100 * 目標横幅 / 目標縦幅 < 100 * GWIDTH (レイヤー番号) / GHEIGHT(レイヤー番号)
	;目的アス比が元のアス比より縦に長い場合、元の画像は横を（）に切り取る
	GDISPOSE TEMP_gID
	GCREATE TEMP_gID, GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号)
	GDRAWG TEMP_gID, レイヤー番号, GWIDTH (レイヤー番号) - (GHEIGHT(レイヤー番号) * 目標横幅 / 目標縦幅), 0, GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号), (GWIDTH (レイヤー番号) - (GHEIGHT(レイヤー番号) * 目標横幅 / 目標縦幅)) / 2, 0, GWIDTH (レイヤー番号), GHEIGHT(レイヤー番号)

	GDISPOSE レイヤー番号
	GCREATE レイヤー番号, 目標横幅, 目標縦幅
	GDRAWG レイヤー番号, TEMP_gID, 0, 0, (GWIDTH (TEMP_gID) * 目標縦幅 / GHEIGHT(TEMP_gID)), 目標縦幅, GWIDTH (TEMP_gID) - (GHEIGHT(TEMP_gID) * 目標横幅 / 目標縦幅), 0,  GWIDTH (TEMP_gID), GHEIGHT(TEMP_gID)
ENDIF
	;両方のアスペクト比が一致したときは何もしない


@カットイン用カラーマトリクス取得(ARG)
;カットイン用カラーマトリクス ,5 ,5
;透明度を指定する
;256なら濃度等倍で透過しない

カットイン用カラーマトリクス:0:0 = 256,  0,  0,  0,  0;R
カットイン用カラーマトリクス:1:0 =   0,256,  0,  0,  0;G
カットイン用カラーマトリクス:2:0 =   0,  0,256,  0,  0;B
カットイン用カラーマトリクス:3:0 =   0,  0,  0, 256 * (100 - ARG) / 100,  0;A
カットイン用カラーマトリクス:4:0 =   0,  0,  0,  0,256;平行


@奥義カットイン個別設定画面(対象キャラ)
#DIM 対象キャラ

DRAWLINE
PRINT 현재 전체 설정:
SELECTCASE カットイン演出一括表示フラグ
	CASE 1
		PRINT [항상 숨기기]
	CASE 2
		PRINT [같은 캐릭터는 하루에 한 번만]
	CASEELSE
		PRINT [항상 표시]
ENDSELECT
PRINT  / 
SELECTCASE カットイン画像一括表示フラグ
	CASE 1
		PRINT [가로 컷인 우선]
	CASE 2
		PRINT [기본 얼굴 그래픽 우선]
	CASEELSE
		PRINT [세로 컷인 우선]
ENDSELECT
PRINTL
DRAWLINE
PRINTL ・컷인 개별 표시 설정 (전체 설정보다 우선)
PRINT 　　
SELECTCASE CSTR:対象キャラ:カットイン個別選択オプション
	CASE "表示"
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[전체 설정 따르기]", 0
		RESETCOLOR
		PRINT  / 
		PRINT [항상 표시]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[항상 숨기기]", 2
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[같은 캐릭터는 하루에 한 번만]", 3
		RESETCOLOR
	CASE "非表示"
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[전체 설정 따르기]", 0
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[항상 표시]", 1
		RESETCOLOR
		PRINT  / 
		PRINT [항상 숨기기]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[같은 캐릭터는 하루에 한 번만]", 3
		RESETCOLOR
	CASE "一日一回のみ"
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[전체 설정에 따름]", 0
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[항상 표시]", 1
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[항상 숨김]", 2
		RESETCOLOR
		PRINT  / 
PRINT [같은 캐릭터는 하루에 한 번만]
	CASEELSE
PRINT [전체 설정에 따름]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[항상 표시]", 1
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[항상 숨김]", 2
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[같은 캐릭터는 하루에 한 번만]", 3
		RESETCOLOR
ENDSELECT
PRINTL
PRINT 　　
SELECTCASE CSTR:対象キャラ:カットイン画像選択オプション
	CASE "縦カットイン"
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[전체 설정에 따름]", 10
		RESETCOLOR
		PRINT  / 
PRINT [세로 컷인 우선]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[가로 컷인 우선]", 12
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[기본 얼굴 그래픽 우선]", 13
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[세로 가로 랜덤 표시]", 14
		RESETCOLOR
	CASE "横カットイン"
		SETCOLOR カラーパレット("グレーアウト")
PRINTBUTTON "[전체 설정에 따름]", 10
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 컷인 우선]", 11
		RESETCOLOR
		PRINT  / 
		PRINT [가로 컷인 우선]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[기본 얼굴 그래픽 우선]", 13
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 가로 랜덤 표시]", 14
		RESETCOLOR
	CASE "デフォルト"
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[전체 설정 따르기]", 10
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 컷인 우선]", 11
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[가로 컷인 우선]", 12
		RESETCOLOR
		PRINT  / 
		PRINT [기본 얼굴 그래픽 우선]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 가로 랜덤 표시]", 14
		RESETCOLOR
	CASE "縦横ランダム"
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[전체 설정 따르기]", 10
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 컷인 우선]", 11
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[가로 컷인 우선]", 12
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[기본 얼굴 그래픽 우선]", 13
		RESETCOLOR
		PRINT  / 
		PRINT [세로 가로 랜덤 표시]
	CASEELSE
		PRINT [전체 설정 따르기]
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 컷인 우선]", 11
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[가로 컷인 우선]", 12
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[기본 얼굴 그래픽 우선]", 13
		RESETCOLOR
		PRINT  / 
		SETCOLOR カラーパレット("グレーアウト")
		PRINTBUTTON "[세로 가로 랜덤 표시]", 14
		RESETCOLOR
ENDSELECT
PRINTL
PRINTL
PRINTBUTTON "[999] 돌아가기", 999
PRINTL
BINPUT
SELECTCASE RESULT
	CASE 0
		CSTR:対象キャラ:カットイン個別選択オプション = 
	CASE 1
		CSTR:対象キャラ:カットイン個別選択オプション = 표시
	CASE 2
		CSTR:対象キャラ:カットイン個別選択オプション = 숨기기
	CASE 3
		CSTR:対象キャラ:カットイン個別選択オプション = 하루 한 번만
	CASE 10
		CSTR:対象キャラ:カットイン画像選択オプション = 
	CASE 11
		CSTR:対象キャラ:カットイン画像選択オプション = 세로 컷인
	CASE 12
		CSTR:対象キャラ:カットイン画像選択オプション = 가로 컷인
	CASE 13
		CSTR:対象キャラ:カットイン画像選択オプション = 기본
	CASE 14
		CSTR:対象キャラ:カットイン画像選択オプション = 세로 가로 랜덤
	CASE 999
		RETURN 0
ENDSELECT

RESTART
