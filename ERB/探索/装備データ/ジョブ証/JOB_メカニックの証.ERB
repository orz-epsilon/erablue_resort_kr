@証関数_メカニックの証(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード

SELECTCASE 処理モード
	CASE "ジョブ証種別"
		証関連文字列受け渡し = 보통 직업
	CASE "証名"
		TSTR:コマンド名受渡 = 메카닉의 증표
	CASE "クラス名"
		; SIF 対象キャラ <= 0
		; 	RETURN 0
		; SELECTCASE GET_JOBSKILL_LEVEL(対象キャラ)
		; 	CASEELSE
		; 		RESULTS = メカニック
		; 		RESULTS:1 = Extra.I
		; 		RETURN 1
		; ENDSELECT
		RETURN 0
	CASE "フレーバー"
		詳細文文字列受け渡し変数 '= "기계를 다루는 것에 특화된 증표.<br>"
		詳細文文字列受け渡し変数 += "HP를 희생하여 얻은 에너지로 다양한 행동이 가능.<br>"
		詳細文文字列受け渡し変数 += "장비하면 던전 탐색 중에 「기계 지식 Lv1」과 같은 효과를 얻을 수 있다.<br>"
ENDSELECT

;ランダム抽選では出現しない（入手法：ダンジョン「バルツ地下廃工場」のイベントで入手）
;@証出現率_メカニックの証(入手タイプ, 装備ランク)

@証アビ関数_メカニックの証_1(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM バフ番号
#DIM CONST 消費ＭＰ = 100

SELECTCASE 処理モード
	CASE "アビ名"
		TSTR:コマンド名受渡 = 에너지 게인
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■에너지 게인<br>"
		詳細文文字列受け渡し変数 += @"　소비 MP:{消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과: 자신의 HP를 현재 값의 절반으로 만들고, 에너지를 [10] 얻는다. (최대 10)<br>"
		詳細文文字列受け渡し変数 += "　　　　이 어빌리티로는 행동 횟수를 소비하지 않는다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		アビ汎用文字列:実行時メッセージ１ = %CALLNAME:(BATTLE_STATE:戦闘行動キャラ:キャラ登録番号)%은(는) 자신의 HP를 에너지로 변환했다!
		BATTLE_STATE:戦闘行動キャラ:ＨＰ = MAX(1, BATTLE_STATE:戦闘行動キャラ:ＨＰ / 2)
		アビテンプレート用_行動消費無しフラグ = 1
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:累積上限_固定値 = 10
		アビ汎用文字列:バフ・デバフ対象能力 = 에너지_메카닉
		CALL アビテンプレート_刻印追加(10)
ENDSELECT

@証アビ関数_メカニックの証_2(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM CONST 消費ＭＰ = 0

SELECTCASE 処理モード
	CASE "アビ名"
		TSTR:コマンド名受渡 = 어택 매뉴버
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■어택 매뉴버<br>"
		詳細文文字列受け渡し変数 += @"　소비 MP:{消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과: 에너지를 [2] 소비한다. <br>"
		詳細文文字列受け渡し変数 += "　　　　적 단일 대상에게 자속성의 [공격력✕200%] 대미지를 준다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL エネルギー_メカニック消費(2)
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果割合 = 200
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

@証アビ関数_メカニックの証_3(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM CONST 消費ＭＰ = 0

SELECTCASE 処理モード
	CASE "アビ名"
		IF 対象キャラ <= 0
			TSTR:コマンド名受渡 = 프로텍트 매뉴버
		ELSEIF 知識素質:対象キャラ:機械知識 > 1
			TSTR:コマンド名受渡 = 프로텍트 매뉴버
		ELSEIF 基礎BATTLE_STATE:対象キャラ:ステータスタイプ保存 == タイプ文字列数値変換("防御")
			TSTR:コマンド名受渡 = 프로텍트 매뉴버
		ENDIF
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■프로텍트 매뉴버 (장비자가 기계 지식 Lv2 이상 or 방어 타입일 때) <br>"
		詳細文文字列受け渡し変数 += @"　소비 MP: {消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과: 에너지를 [4] 소비한다. <br>"
		詳細文文字列受け渡し変数 += "　　　　아군 전체에게 1회 대미지 컷 [50%] 효과를 부여한다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL エネルギー_メカニック消費(4)
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		アビ汎用変数:効果割合 = 50
		アビ汎用文字列:バフ・デバフ枠 = 피해 감소
		アビ汎用文字列:バフ・デバフ対象能力 = 피해
		アビ汎用変数:持続回数 = 1
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@証アビ関数_メカニックの証_4(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM CONST 消費ＭＰ = 0

SELECTCASE 処理モード
	CASE "アビ名"
		IF 対象キャラ <= 0
			TSTR:コマンド名受渡 = 오라 매뉴버
		ELSEIF 知識素質:対象キャラ:機械知識 > 1
			TSTR:コマンド名受渡 = 오라 매뉴버
		ELSEIF 基礎BATTLE_STATE:対象キャラ:ステータスタイプ保存 == タイプ文字列数値変換("回復")
			TSTR:コマンド名受渡 = 오라 매뉴버
		ENDIF
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■오라 매뉴버 (장비자가 기계 지식 Lv2 이상 or 회복 타입일 때) <br>"
		詳細文文字列受け渡し変数 += @"　소비 MP：{消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과：에너지를 [3] 소비한다. <br>"
		詳細文文字列受け渡し変数 += "　　　　아군 전체에게 3턴 재생[회복력✕10% (상한 500)/B칸] 효과를 부여한다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL エネルギー_メカニック消費(3)
		CALL アビ対象選択テンプレート_味方全体_生者のみ
		CALL バフ込み数値算出("회복력")
		アビ汎用変数:効果量 = MIN(RESULT * 10 / 100, 500)
		アビ汎用文字列:バフ・デバフ枠 = 再生B
		アビ汎用文字列:バフ・デバフ対象能力 = 再生
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@証アビ関数_メカニックの証_5(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM バフ番号
#DIM 消費エネルギー
#DIM CONST 消費ＭＰ = 0

SELECTCASE 処理モード
	CASE "アビ名"
		IF 対象キャラ <= 0
			TSTR:コマンド名受渡 = エナジーマニューバ
		ELSEIF 知識素質:対象キャラ:機械知識 > 1
			TSTR:コマンド名受渡 = エナジーマニューバ
		ELSEIF 基礎BATTLE_STATE:対象キャラ:ステータスタイプ保存 == タイプ文字列数値変換("奥義")
			TSTR:コマンド名受渡 = エナジーマニューバ
		ENDIF
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■에너지 매뉴버 (장비자가 기계 지식 Lv2 이상 또는 오의 타입일 때)<br>"
		詳細文文字列受け渡し変数 += @"　소비 MP：{消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과：에너지를 모두 소비한다. <br>"
		詳細文文字列受け渡し変数 += "　　　　자신에게 1회 오의 위력 증가[소비한 에너지✕10%/A칸]를 부여한다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		消費エネルギー = 刻印現在数確認("エネルギー_メカニック", 戦闘行動キャラ)
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用文字列:バフ・デバフ対象能力 = エネルギー_メカニック
		CALL アビテンプレート_刻印減少(消費エネルギー)
		
		CALL アビ汎用変数文字列リセット
		アビ汎用変数:効果割合 = 消費エネルギー * 10
		アビ汎用文字列:バフ・デバフ枠 = ダメージ補正_奥義ダメージA
		アビ汎用文字列:バフ・デバフ対象能力 = ダメージ補正_奥義ダメージ
		アビ汎用変数:持続回数 = 1
		CALL アビテンプレート_有利効果_バフ効果セット
ENDSELECT

@証アビ関数_メカニックの証_6(処理モード, 対象キャラ)
#DIM 対象キャラ
#DIMS 処理モード
#DIM CONST 消費ＭＰ = 0

SELECTCASE 処理モード
	CASE "アビ名"
		IF 対象キャラ <= 0
			TSTR:コマンド名受渡 = 밤 매뉴버
		ELSEIF 知識素質:対象キャラ:機械知識 > 1
			TSTR:コマンド名受渡 = 밤 매뉴버
		ELSEIF 基礎BATTLE_STATE:対象キャラ:ステータスタイプ保存 == タイプ文字列数値変換("攻撃")
			TSTR:コマンド名受渡 = 밤 매뉴버
		ENDIF
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 '= "■밤 매뉴버 (장비자가 기계 지식 Lv2 이상 or 공격 타입일 때)<br>"
		詳細文文字列受け渡し変数 += @"　소비 MP:{消費ＭＰ}<br>"
		詳細文文字列受け渡し変数 += "　효과: 에너지를 [3] 소비한다. <br>"
		詳細文文字列受け渡し変数 += "　　　　적 단일에게 자속성의 [자신의 레벨✕50] 고정 대미지를 준다."
		RETURN 消費ＭＰ
	CASE "アビ効果"
		CALL エネルギー_メカニック消費(3)
		CALL アビ対象選択テンプレート_敵単体
		アビ汎用変数:効果量 = BATTLE_STATE:戦闘行動キャラ:Lv * 50
		CALL アビテンプレート_ダメージ処理_自属性
ENDSELECT

@エネルギー_メカニック消費(消費エネルギー)
#DIM 消費エネルギー
#DIM バフ番号
#DIM エネルギー不足

IF 刻印現在数確認("エネルギー_メカニック", 戦闘行動キャラ) < 消費エネルギー
	CALL 口上変数初期化
	WSTR:(K++) = 에너지가 부족합니다.
	CALL メッセージ欄表示用関数(@"探索用_{戦闘行動キャラ}_顔",,,0,1)
	アビテンプレート用_キャンセルフラグ = 1
ELSE
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用文字列:バフ・デバフ対象能力 = エネルギー_メカニック
	CALL アビテンプレート_刻印減少(消費エネルギー)
ENDIF

CALL アビ汎用変数文字列リセット

