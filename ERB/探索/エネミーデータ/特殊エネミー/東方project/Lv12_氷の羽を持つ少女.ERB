
@敵BATTLE_STATE_Lv12_氷の羽を持つ少女(ARG)
敵BATTLE_STATE:ARG:Lv = 12
敵BATTLE_STATE:ARG:최대HP = 13000
敵BATTLE_STATE:ARG:ＨＰ = 13000
敵BATTLE_STATE:ARG:공격력 = 550
敵BATTLE_STATE:ARG:방어력 = 490
敵BATTLE_STATE:ARG:회복력 = 0
敵BATTLE_STATE:ARG:행동속도 = 460
敵BATTLE_STATE:ARG:DA율 = 0
敵BATTLE_STATE:ARG:TA율 = 0
敵BATTLE_STATE:ARG:명중률 = 100
敵BATTLE_STATE:ARG:회피율 = 0
敵BATTLE_STATE:ARG:属性 = 1
敵BATTLE_STATE:ARG:所持EXP = 685
敵BATTLE_STATE:ARG:所持ルピ = 0
敵BATTLE_STATE:ARG:最大チャージターン = 2

敵BATTLE_STATE:ARG:ボスフラグ = 1
敵BATTLE_STATE:ARG:ランダム不許可フラグ = 1

敵BATTLE_STATE_STR:ARG:種族 = 人型_妖精

SIF EXIST画像FILE(@"%CSTR:(キャラ検索("[湖上の氷精]チルノ")):画像フォルダ%/顔_デフォルト")
	敵BATTLE_STATE_STR:ARG:ボス画像 = %CSTR:(キャラ検索("[湖上の氷精]チルノ")):画像フォルダ%/顔_デフォルト

@敵討伐後処理_Lv12_氷の羽を持つ少女(隊列番号)
#DIM 隊列番号
#DIM ドロップ確率
#DIMS ドロップアイテム
#DIM データベース行数
#DIM トレハンLv

トレハンLv = 0
データベース行数 = デバフ番号取得("ドロップ率UP")
SIF データベース行数 > -1
	トレハンLv = DT_CELL_GET("戦闘効果データベース", データベース行数, "効果量_固定値")


ドロップ確率 = 10 + トレハンLv * 5
IF RAND:100 < ドロップ確率
	リザルト後特殊処理_処理キー = チルノ大ちゃん招待フラグ解放
ENDIF

@リザルト後特殊処理_チルノ大ちゃん招待フラグ解放()
#DIMS 立ち絵_チルノ
#DIMS 立ち絵_大ちゃん
#DIM 対象キャラ
#DIM 対象キャラ２

対象キャラ = キャラ検索("[湖上の氷精]チルノ")
対象キャラ２ = キャラ検索("[霧の中で見つかる妖精]大妖精")
;既に解放済みなら戻す
SIF CFLAG:対象キャラ:招待不可フラグ == 0 && CFLAG:対象キャラ２:招待不可フラグ == 0
	RETURN 0

;立ち絵リソース記録に必要な画像のリソースを生成する
CALLF 顔グラ表示用文字列関数(対象キャラ,100,,,1,1)
立ち絵_チルノ = %立ち絵リソース記録%
CALLF 顔グラ表示用文字列関数(対象キャラ２,101,,,1,1)
立ち絵_大ちゃん = %立ち絵リソース記録%

;会話部分

CALL 口上変数初期化
WSTR:(K++) = ……이런! 푸른 머리칼의 소녀가 일어나, 적의 없는 눈으로 이쪽을 보고 있다!
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「나와 호각이라니, 재능 있는 인간이네.
WSTR:(K++) = 　강적인 나에게 과감히 도전한 증거로, 이걸 줄게」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"氷の羽を持つ少女",,0)
CALL 口上変数初期化
WSTR:(K++) = 「치르노쨩, 치르노쨩.
WSTR:(K++) = 　보통, 얼어붙은 개구리를 받아도, 인간 씨는 곤란해한다구」
CALL メッセージ欄表示用関数(立ち絵_大ちゃん,"妖精のような少女",,0)
CALL 口上変数初期化
WSTR:(K++) = 「에에~? 그럴 리 없어.
WSTR:(K++) = 　나의 보통은 『물건을 받으면 기쁘다』라구」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"氷の羽を持つ少女",,0)
CALL 口上変数初期化
WSTR:(K++) = 녹색 머리칼의 소녀(어느새 함께 있었다)가 말하는 대로, 얼어붙은 개구리……
WSTR:(K++) = ……개구리가 갇힌 얼음 덩어리……를 받아도, 조금 곤란하다.
WSTR:(K++) = 이제부터 돌아갈 거라면 몰라도, 아직 할 일이 남아있으니까.
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「할 일? ……음?
WSTR:(K++) = 　이 붉은 안개를 멈추러, 이세계에서 왔다고?
WSTR:(K++) = 　무슨 소리 하는 거야 얘」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"氷の羽を持つ少女",,0)
CALL 口上変数初期化
WSTR:(K++) = 음, 정말인데 말이야.
WSTR:(K++) = 푸른 머리의 소녀(치르노라는 이름인 듯하다)는 의심스러운 표정으로 %CALLNAME:MASTER%를 노려보았다.
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「정말로 이세계에서 왔다고 한다면, 증거를 보여줘.
WSTR:(K++) = 　내놓을 수 있어? 내놓을 수 없잖아! 이세계 같은 걸 가져올 수 있을 리 없으니까!」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"チルノ",,0)
CALL 口上変数初期化
WSTR:(K++) = 가져오는 것은 확실히 불가능하지만, 데려가는 것은 가능하다.
WSTR:(K++) = 백 번 듣는 것보다 한 번 보는 것이 낫다고 하니, 증거라고 한다면 이보다 더 좋은 것은 없을 것이다.
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「…………???」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"チルノ",,0)
CALL 口上変数初期化
WSTR:(K++) = 이해하지 못하는 듯한 얼굴의 치르노에게, 즉, 하고 설명한다.
WSTR:(K++) = 우리 집에 놀러 와 볼래?
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「뭐야, 알기 어려운 설명을 하는 녀석!
WSTR:(K++) = 　하지만 초대는 받아줄게! 다이쨩도 같이 가자!」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"チルノ",,0)
CALL 口上変数初期化
WSTR:(K++) = 「아, 저도 방해해도…… 괜찮을까요?
WSTR:(K++) = 　가보고 싶네요, 이세계」
CALL メッセージ欄表示用関数(立ち絵_大ちゃん,"大ちゃん",,0)
CALL 口上変数初期化
WSTR:(K++) = %CALLNAME:MASTER%는 고개를 끄덕인다.
WSTR:(K++) = 하지만 여러 가지가 끝난 후에 말이야. 얼어붙은 개구리도 그때 잘 부탁해.
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = 「얼어붙은 잉어도 만들 수 있어」
CALL メッセージ欄表示用関数(立ち絵_チルノ,"チルノ",,0)
CALL 口上変数初期化
WSTR:(K++) = 그건 필요 없을 것 같은데.
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
WSTR:(K++) = [호수의 얼음 요정] 치르노가 리조트를 방문하게 되었다!
WSTR:(K++) = [안개 속에서 발견되는 요정] 대요정이 리조트를 방문하게 되었다!
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化

CFLAG:対象キャラ:招待不可フラグ = 0
CFLAG:対象キャラ２:招待不可フラグ = 0


@敵トリガー行動_Lv12_氷の羽を持つ少女
#DIM 攻撃回数
#DIM 大ちゃん生存３回死亡５回
#DIMS 立ち絵_チルノ

;立ち絵リソース記録に必要な画像のリソースを生成する
CALLF 顔グラ表示用文字列関数(キャラ検索("[湖上の氷精]チルノ"),100,,,1,1)
立ち絵_チルノ = %立ち絵リソース記録%


IF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):최대HP * 2 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0) == 0

	;顔グラ込みのセリフを出す
	WSTR:(K++) = 「%TEXTR("두 번 다시 육지에는 못 올라오게 할 거야!/냉동 보존해 주겠어!/누구든 꽁꽁 얼려버릴 거야!")%」
	CALL メッセージ欄表示用関数(立ち絵_チルノ,"氷の羽を持つ少女",,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
	アビ汎用文字列:実行時メッセージ２ = ──얼음 부적「아이시클 폴」──

	FOR 攻撃回数, 0, 3
		CALL アビ対象選択テンプレート_味方ランダムＸ体(3, 1)
		アビ汎用変数:効果割合 = 100
		CALL アビテンプレート_ダメージ処理_自属性
	NEXT

	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ枠 = 빙결
	アビ汎用文字列:バフ・デバフ対象能力 = 빙결
	アビ汎用変数:効果量 = 50
	アビ汎用変数:累積上限_固定値 = 500
	アビ汎用変数:持続ターン = 5
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_不利効果_累積デバフ効果セット

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
	
ELSEIF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):최대HP * 1 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1) == 0

	;顔グラ込みのセリフを出す
	WSTR:(K++) = 「%TEXTR("두 번 다시 육지에는 못 올라오게 할 거야!/냉동 보존해 주겠어!/누구든 꽁꽁 얼려버릴 거야!")%」
	CALL メッセージ欄表示用関数(立ち絵_チルノ,"氷の羽を持つ少女",,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
	アビ汎用文字列:実行時メッセージ２ = ──얼음 부적「콜드 디비니티」──

	IF 敵BATTLE_STATE:4:ＨＰ < 1
		大ちゃん生存３回死亡５回 = 5
	ELSE
		大ちゃん生存３回死亡５回 = 3
	ENDIF


	FOR 攻撃回数, 0, 大ちゃん生存３回死亡５回
		SIF 攻撃回数 > 0
			CALL アビ汎用変数文字列リセット

		アビ汎用変数:敵対心無視オプション = 1
		CALL アビ対象選択テンプレート_味方ランダムＸ体(1)
		アビ汎用変数:効果割合 = 150
		CALL アビテンプレート_ダメージ処理_自属性

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 凍符_행동속도
		アビ汎用文字列:バフ・デバフ対象能力 = 행동속도
		アビ汎用変数:効果割合 = 10
		アビ汎用変数:累積上限_割合 = 30
		アビ汎用変数:持続ターン = 3
		アビ汎用変数:基礎成功確率 = 100
		CALL アビテンプレート_不利効果_累積デバフ効果セット
	NEXT

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
ELSE
	;通常攻撃は複数回攻撃
	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 통상 탄막!

	FOR 攻撃回数, 0, RAND:2 + 2
		CALL アビ対象選択テンプレート_味方ランダムＸ体(1)
		アビ汎用変数:効果割合 = 80
		アビ汎用文字列:ダメージ種類 = 일반 공격 데미지
		CALL アビテンプレート_ダメージ処理_自属性
	NEXT
	IF デバフ番号取得("恐怖", 戦闘行動キャラ) < 0
		敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン += 1
	ELSE
		;回数消費
		CALL デバフ回数経過処理(戦闘行動キャラ, "恐怖")
	ENDIF
ENDIF

RETURN 1

@敵チャージ行動_Lv12_氷の羽を持つ少女
#DIM 攻撃回数
アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
アビ汎用文字列:実行時メッセージ２ = ──빙부「아이시클 폴」──

FOR 攻撃回数, 0, 3
	CALL アビ対象選択テンプレート_味方ランダムＸ体(3, 1)
	アビ汎用変数:効果割合 = 100
	CALL アビテンプレート_ダメージ処理_自属性
NEXT

CALL アビ汎用変数文字列リセット
アビ汎用文字列:バフ・デバフ枠 = 빙결
アビ汎用文字列:バフ・デバフ対象能力 = 빙결
アビ汎用変数:効果量 = 50
アビ汎用変数:累積上限_固定値 = 500
アビ汎用変数:持続ターン = 5
アビ汎用変数:消去不可オプション = 1
CALL アビテンプレート_不利効果_累積デバフ効果セット

