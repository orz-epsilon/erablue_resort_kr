
;コンセプト：吸血鬼パワー！！　ということでバフがガンガン付きます。全部ディスペルしましょう。
;ディスペル忘れると死にます。吸血鬼は強い。

@敵BATTLE_STATE_Lv18_吸血鬼レミリア(ARG)
敵BATTLE_STATE:ARG:Lv = 18
敵BATTLE_STATE:ARG:최대HP = 25000
敵BATTLE_STATE:ARG:ＨＰ = 25000
敵BATTLE_STATE:ARG:공격력 = 600
敵BATTLE_STATE:ARG:방어력 = 600
敵BATTLE_STATE:ARG:회복력 = 0
敵BATTLE_STATE:ARG:행동속도 = 570
敵BATTLE_STATE:ARG:DA율 = 50
敵BATTLE_STATE:ARG:TA율 = 50
敵BATTLE_STATE:ARG:명중률 = 100
敵BATTLE_STATE:ARG:회피율 = 5
敵BATTLE_STATE:ARG:属性 = 5
敵BATTLE_STATE:ARG:所持EXP = 1750
敵BATTLE_STATE:ARG:所持ルピ = 0
敵BATTLE_STATE:ARG:最大チャージターン = 3

敵BATTLE_STATE:ARG:ボスフラグ = 1
敵BATTLE_STATE:ARG:ランダム不許可フラグ = 1

敵BATTLE_STATE_STR:ARG:種族 = 人型_妖怪_吸血鬼

SIF EXIST画像FILE(@"%CSTR:(キャラ検索("[永遠に紅い幼き月]レミリア")):画像フォルダ%/顔_デフォルト")
	敵BATTLE_STATE_STR:ARG:ボス画像 = %CSTR:(キャラ検索("[永遠に紅い幼き月]レミリア")):画像フォルダ%/顔_デフォルト

@敵トリガー行動_Lv18_吸血鬼レミリア
#DIM 攻撃回数
#DIMS 立ち絵_レミリア

;立ち絵リソース記録に必要な画像のリソースを生成する
CALLF 顔グラ表示用文字列関数(キャラ検索("[永遠に紅い幼き月]レミリア"),100,,,1,1)
立ち絵_レミリア = %立ち絵リソース記録%


IF GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 2) == 0

	;顔グラ込みのセリフを出す
	WSTR:(K++) = 「흡혈귀의 힘, 마음껏 맛보아라」
	CALL メッセージ欄表示用関数(立ち絵_レミリア,"レミリア",,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
	アビ汎用文字列:実行時メッセージ２ = ──「밀레니엄의 흡혈귀」──

	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用変数:効果量 = 2000
	アビ汎用文字列:バフ・デバフ枠 = 재생A
	アビ汎用文字列:バフ・デバフ対象能力 = 재생
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット
	
	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果割合 = 100
	アビ汎用文字列:バフ・デバフ枠 = 방어력A
	アビ汎用文字列:バフ・デバフ対象能力 = 방어력
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット
	
	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果割合 = 100
	アビ汎用文字列:バフ・デバフ枠 = 공격력A
	アビ汎用文字列:バフ・デバフ対象能力 = 공격력
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 2
ELSEIF バフ番号取得_枠("大技待機", 戦闘行動キャラ) > -1
	;バリアが残ってるか？
	IF バフ番号取得_枠("バリア", 戦闘行動キャラ) > -1
		;あるなら超大技
		;顔グラ込みのセリフを出す
		WSTR:(K++) = 「────흡혈귀의 십자가를 보았다면」
		WSTR:(K++) = 「두 번 다시 아침을 맞이할 수는 없을 것이다!」
		CALL メッセージ欄表示用関数(立ち絵_レミリア,"レミリア",,0)
		CALL 口上変数初期化

		アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
		アビ汎用文字列:実行時メッセージ２ = ──홍부「불야성 레드」──
	
		CALL アビ対象選択テンプレート_自己のみ
		アビ汎用変数:効果割合 = 100
		アビ汎用文字列:バフ・デバフ枠 = 공격력A
		アビ汎用文字列:バフ・デバフ対象能力 = 공격력
		アビ汎用変数:持続ターン = -1
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方全体_生者のみ()
		アビ汎用変数:効果割合 = 300
		FOR 攻撃回数, 0, 3
			CALL アビテンプレート_ダメージ処理_自属性()
		NEXT
		行動種別フラグ:戦闘行動キャラ:大技発動 = 1
	ELSE
		WSTR:(K++) = 「으아아!」
		CALL メッセージ欄表示用関数(立ち絵_レミリア,"レミリア",,0)
		CALL 口上変数初期化
		
		アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 큰 기술 저지에 성공했다!
		アビ汎用文字列:実行時メッセージ２ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%은(는) 크게 자세를 무너뜨리고 있다……。
		CALL アビテンプレート_何もしない
	ENDIF
	CALL 大技待機解除(戦闘行動キャラ)
	CALL デバフ削除_枠(戦闘行動キャラ, "행동속도A")
ELSEIF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):최대HP * 2 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0) == 0

	;顔グラ込みのセリフを出す
	WSTR:(K++) = 「운명에는 거역할 수 없어!」
	CALL メッセージ欄表示用関数(立ち絵_レミリア,"レミリア",,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
	アビ汎用文字列:実行時メッセージ２ = ──야부「데몬 킹 크레이들」──

	CALL アビ対象選択テンプレート_味方ランダムＸ体(1)
	アビ汎用変数:効果割合 = 200
	CALL アビテンプレート_ダメージ処理_自属性()
	
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用変数:効果量 = 70
	アビ汎用文字列:バフ・デバフ枠 = 회피율A
	アビ汎用文字列:バフ・デバフ対象能力 = 회피율
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 0
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
	
ELSEIF 敵BATTLE_STATE:(戦闘行動キャラ - 10):ＨＰ < 敵BATTLE_STATE:(戦闘行動キャラ - 10):최대HP * 1 / 3 && GETBIT(敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1) == 0

	;顔グラ込みのセリフを出す
	WSTR:(K++) = 「흥이 올랐어. 흡혈귀의 십자가를, 볼 용기는 있을까」
	CALL メッセージ欄表示用関数(立ち絵_レミリア,"レミリア",,0)
	CALL 口上変数初期化

	アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 준비!
	アビ汎用文字列:実行時メッセージ２ = 다음 턴 발동까지 배리어를 파괴하고, 선언을 막아라!

	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用変数:特殊表示オプション = 1
	アビ汎用変数:消去不可オプション = 1
	アビ汎用文字列:バフ・デバフ枠 = 큰 기술 대기
	アビ汎用文字列:バフ・デバフ対象能力 = 큰 기술 대기
	アビ汎用変数:持続ターン = -1
	CALL アビテンプレート_有利効果_バフ効果セット

	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果量 = 2500
	アビ汎用文字列:バフ・デバフ枠 = 배리어
	アビ汎用文字列:バフ・デバフ対象能力 = 배리어
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_有利効果_バフ効果セット

	CALL アビ汎用変数文字列リセット
	アビ汎用変数:効果量 = 9999
	アビ汎用文字列:バフ・デバフ枠 = 행동속도A
	アビ汎用文字列:バフ・デバフ対象能力 = 행동속도
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	CALL アビテンプレート_不利効果_デバフ効果セット

	;トリガーフラグをセット
	SETBIT 敵BATTLE_STATE:(戦闘行動キャラ - 10):トリガー行動フラグ, 1
	;チャージリセット
	敵BATTLE_STATE:(戦闘行動キャラ - 10):チャージターン = 0
ELSE
	RETURN 0
ENDIF

RETURN 1

@敵チャージ行動_Lv18_吸血鬼レミリア

アビ汎用文字列:実行時メッセージ１ = %敵BATTLE_STATE_STR:(戦闘行動キャラ - 10):エネミー名%의 스펠 카드 선언!
アビ汎用文字列:実行時メッセージ２ = ──천벌 「스타 오브 다비데」──

CALL アビ対象選択テンプレート_味方全体_生者のみ()
アビ汎用変数:効果割合 = 150
CALL アビテンプレート_ダメージ処理_自属性()
	
CALL アビ汎用変数文字列リセット
CALL アビ対象選択テンプレート_自己のみ
アビ汎用変数:効果割合 = 50
アビ汎用文字列:バフ・デバフ枠 = 공격력A
アビ汎用文字列:バフ・デバフ対象能力 = 공격력
アビ汎用変数:持続ターン = -1
CALL アビテンプレート_有利効果_バフ効果セット

