;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_1(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:5
	CASE 0
		WSTR:(K++) = 「순조롭다고 방심하지 말거라?」
		KSTR:(K++) = 「호사다마. 잘 될 때일수록 신중하게 가야지」
	CASE 1
		WSTR:(K++) = 아닐라는 작게 하품을 하고 있다.
		KSTR:(K++) = 「크아…… 졸음이 몰려온 것 같구나……」
	CASE 2
		WSTR:(K++) = 「이런이런. 탐색도 쉽지 않구나」
		KSTR:(K++) = 「돌아가면 보상으로 양갱이라도 기대하고 싶구나?」
	CASE 3
		WSTR:(K++) = 「응? 뭐냐, 나를 보고」
		KSTR:(K++) = 「이 뿔인가? 꽤나 매력적이지」
	CASE 4
		WSTR:(K++) = 「응? 뭐냐, 나를 보고」
		KSTR:(K++) = 「…………시선이 어디를 향하고 있는지는 알고 있다. 이 변태 녀석」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;戦闘中特定タイミングで表示される文章
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
@KOJO_DUNGEON_固有アビ発動時_1_1(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_1_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「모두 벌을 주마!」
ELSE
	KSTR:(K++) = 「신위의 바람, 온 하늘을 쏘아라!」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1_2(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_1_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「꾸중을 들을 때가 꽃이란다?」
ELSE
	KSTR:(K++) = 「여기가 승부의 갈림길이다」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_1_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「크흣, 힘이 솟아나는 것 같지?」
ELSE
	KSTR:(K++) = 「나에게 맡겨라!」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

@KOJO_DUNGEON_固有アビ発動時_1_4(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ

;YYYYを固有アビ関数の「@固有アビ_1_YYYY」のYYYYと同じに変更する
;使用したアビリティの名前は「使用アビ名」に入ってくる
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「힘을 합치면 반드시 이길 수 있을 것이다!」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_1(対象キャラ, 使用奥義名)
#DIMS 使用奥義名
#DIM 対象キャラ

CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)
LOCAL:2 = GETCHARA(2)

IF キャラ隊列検索(LOCAL:2) > -1
	KSTR:(K++) = 「어디, 내 차례인가!」

	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「아닐라 언니, 힘내!」
ELSEIF 陥落チェック(対象キャラ) && 基礎BATTLE_STATE:対象キャラ:Lv >= 70
	KSTR:(K++) = 「오라! 복슬복슬한 동포들이여!」
ELSE
	KSTR:(K++) = 「만물의 이치, 내 손안에 있으리라!」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)

;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_1(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「간다!」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_1(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「자, 끝이다!」
ELSE
	KSTR:(K++) = 「아직 멀었군」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

; ;--------------------------------------------------
; ;味方から回復を受けた時
; ;「（キャラ名）のＨＰが」の直後に表示される
; ;複数人回復した場合、ランダムで一人の分が表示される
; ;--------------------------------------------------
; ;（現在未実装）
; @KOJO_DUNGEON_被回復時_1(対象キャラ)
; #DIM 対象キャラ
; CALL 口上変数初期化
; LOCAL = GETCHARA(1)
; LOCAL:1 = キャラ隊列検索(LOCAL)

; ;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」で1が
; ;「戦闘行動キャラ」で隊列番号が取れる

; KSTR:(K++) = 

; CALL メッセージ欄表示用関数(@"探索用_{LOCAL:1}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_1(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「쿠후후후후! 승리의 복슬복슬은 기분이 좋구나!」
ELSE
	SELECTCASE RAND:2
		CASE 0
			KSTR:(K++) = 「쿠후후후, 유쾌하구나 유쾌해」
		CASE 1
			KSTR:(K++) = 「쿠후후, 십이신장인 나의 힘을 보았느냐」
	ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_1(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「으음, 면목 없군…… 이런 추태를 보이다니」
ELSE
	KSTR:(K++) = 「불각… 나도 아직 멀었군…」
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;逃走時
;--------------------------------------------------
;@KOJO_DUNGEON_逃走時_1(対象キャラ)
;#DIM 対象キャラ
;CALL メッセージ欄表示用関数(,,,0)
;CALL 口上変数初期化
;LOCAL = キャラ隊列検索(対象キャラ)
;
;KSTR:(K++) = 「少し油断したかの……一時撤退じゃ！」
;
;CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;--------------------------------------------------
;全滅リザルト
;--------------------------------------------------
@KOJO_DUNGEON_全滅リザルト_1(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「으음, 면목 없군…… 이런 추태를 보이다니」
ELSE
	KSTR:(K++) = 「불각… 나도 아직 멀었군…」
ENDIF
;--------------------------------------------------
;ボス撃破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_討伐達成リザルト_1(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「어떠냐! 나의 활약을 보았느냐?」

;--------------------------------------------------
;ダンジョン踏破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_踏破達成リザルト_1(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「뭐, 나에게 걸리면 이 정도지!」

;--------------------------------------------------
;ダンジョンから抜けるで終了
;--------------------------------------------------
@KOJO_DUNGEON_撤退リザルト_1(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

KSTR:(K++) = 「오늘은 이쯤에서 끝이다」
