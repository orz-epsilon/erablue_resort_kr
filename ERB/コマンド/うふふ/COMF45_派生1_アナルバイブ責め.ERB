
@COMNAME_S45_1
#FUNCTIONS
TSTR:コマンド名受渡 = 애널 바이브 고문
SIF MODE_存在判定_ターゲット側("アナルバイブ", PLAYER)
	TSTR:コマンド名受渡 = 애널 바이브 자위

;===================================================
;コマンドタイプ
;===================================================
@COMTYPE_S_45_1
#FUNCTION
TFLAG:コマンドタイプ受渡 = COMTYPE("道具系&Ａ系")
弱点コマンドカテゴリ = A
オートコマンド許可 = 1

@COM_TOOLTIP_S45_1
LOCALS = <br>■アナルバイブ責め<br>
LOCALS += "애널 바이브가 삽입되어 있는 상대에게, 애널 바이브를 움직여 고문하는 커맨드. <br>애널 바이브가 삽입되어 있는 것이 자신인 경우, 애널 바이브 자위가 된다."
LOCALS += "<br>COM 타입: 도구계<br>획득 소스: 쾌A・접촉・고통"
LOCALS += "<br>고유 획득 경험: 도구 사용 경험(PLAYER)<br>"
TSTR:ツールチップ受渡 = %LOCALS%

@COM_S45_1
;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
IF MODE_存在判定_ターゲット側("アナルバイブ", PLAYER)
	CALL SOURCE_CALC_快Ａ(PLAYER, -1, 500)
ELSE
	CALL SOURCE_CALC_快Ａ(TARGET, PLAYER, 500)
	CALL SOURCE_CALC_接触(TARGET, PLAYER, 100)
	CALL SOURCE_CALC_接触(PLAYER, TARGET, 100)

	;苦痛
	LOCAL = 200 * PAIN_CHECK_A(TARGET) / 1000
	CALL SOURCE_CALC_苦痛(TARGET, PLAYER, LOCAL)
ENDIF

RCVAR:TARGET:道具コマンドフラグ = 1

RETURN 1

;-------------------------------------------------
;実行判定
;-------------------------------------------------
@COM_ABLE_S45_1
;実行判定
SIF SAVESTR:ゲームフェイズ管理 != "通常モード"
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE_S("45_1")
	RETURN RESULT
;バイブモードじゃない時はアウト
SIF !MODE_存在判定_ターゲット側("アナルバイブ", PLAYER) && !MODE_存在判定_ターゲット側("アナルバイブ", TARGET)
	RETURN 0

;指を何かに使ってるなら無理
SIF TEQUIP:PLAYER:指
	RETURN 0
RETURN 1

;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MESSAGE_COM_S45_1
#DIM 同時キャラ番号
PRINTFORM %CALLNAME:PLAYER%는
IF MODE_存在判定_ターゲット側("アナルバイブ", PLAYER)
	PRINTFORML 자신이 머금고 있는 아날 바이브를 움직여, 강한 쾌락을 탐했다...
ELSE
	PRINTFORML %CALLNAME:TARGET%가 머금고 있는 아날 바이브를 움직여, 강한 쾌락을 주었다...
ENDIF


