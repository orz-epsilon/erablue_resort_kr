
@同室画面文字色設定(対象キャラ)
#DIM CONST デフォ色 = 12632256
#DIM 対象キャラ
#DIM 変更文字色
#DIMS DYNAMIC 変更表示名
#DIM R値
#DIM G値
#DIM B値

IF CFLAG:対象キャラ:同室文字色
	R値 = CFLAG:対象キャラ:同室文字色 / 256 / 256
	G値 = CFLAG:対象キャラ:同室文字色 / 256 % 256
	B値 = CFLAG:対象キャラ:同室文字色 % 256
	変更文字色 = CFLAG:対象キャラ:同室文字色
ELSE
	R値 = 192
	G値 = 192
	B値 = 192
	変更文字色 = デフォ色
ENDIF

変更表示名 '= CSTR:対象キャラ:同室者一覧表示名

$表示LOOP
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
PRINTL
DRAWLINE
PRINTL 동실자 목록 및 캐릭터 위치 표시 화면에서 사용할 표시 이름/글자색을 설정할 수 있습니다.
PRINTL 표시 이름에 관해서는 적용되는 장면과 적용되지 않는 장면이 있습니다. 구상 등, 시나리오 내에서는 적용되지 않습니다. 별명 포함 표시 시에는 적용되지 않습니다.
PRINTL 이 글자색은 연모나 섹스 파트너, 발정이나 임신보다 우선하여 표시되므로 주의하십시오.
DRAWLINE
IF 変更表示名 == ""
	PRINTFORML ・%NAME表示(対象キャラ)%의 현재 표시 이름: %CALLNAME:対象キャラ% (기본값)
	PRINTPLAIN [995] 기본값으로 되돌리기
	PRINTL
	PRINTBUTTON "[996] 표시 이름을 변경하기", 996
	PRINTL
ELSE
	PRINTFORML ・%NAME表示(対象キャラ)%의 현재 표시 이름: %変更表示名%
	PRINTBUTTON @"[995] 기본값 (%CALLNAME:対象キャラ%)으로 되돌리기", 995
	PRINTL
	PRINTBUTTON "[996] 표시 이름을 변경하기", 996
	PRINTL
ENDIF
DRAWLINE
PRINTFORM ・%NAME表示(対象キャラ)%의 현재 설정 글자색:
IF 文字色グループ取得(対象キャラ) > -1
	SETCOLOR 同室時_グループ文字色:(文字色グループ取得(対象キャラ))
	PRINTFORML 그룹{文字色グループ取得(対象キャラ), 2}: [%CALLNAME:対象キャラ%]
	RESETCOLOR
ELSEIF CFLAG:対象キャラ:同室文字色
	SETCOLOR CFLAG:対象キャラ:同室文字色
	PRINTFORML 개별 글자색: [%CALLNAME:対象キャラ%]
	RESETCOLOR
ELSE
	PRINTL 기본값
ENDIF
DRAWLINE

PRINT ・변경 후 글자색:
IF 文字色グループ取得(対象キャラ) > -1
	SETCOLOR 同室時_グループ文字色:(文字色グループ取得(対象キャラ))
	PRINTFORML 그룹{文字色グループ取得(対象キャラ), 2}: [%CALLNAME:対象キャラ%]
	RESETCOLOR
ELSEIF 変更文字色 == デフォ色
	PRINTL 기본값
ELSE
	SETCOLOR 変更文字色
	PRINTFORML 개별 문자 색상:[%CALLNAME:対象キャラ%]
	RESETCOLOR
ENDIF
PRINTL
PRINTL ■RGB 지정
PRINT R　　
PRINTBUTTON "[-10]", 0
PRINTBUTTON "[-1]", 1
PRINTFORM  {R値, 3} 
PRINTBUTTON "[+1]", 2
PRINTBUTTON "[+10]", 3
PRINT 　　
PRINTBUTTON "[숫자 지정]", 9
PRINTL 
PRINT G　　
PRINTBUTTON "[-10]", 10
PRINTBUTTON "[-1]", 11
PRINTFORM  {G値, 3} 
PRINTBUTTON "[+1]", 12
PRINTBUTTON "[+10]", 13
PRINT 　　
PRINTBUTTON "[숫자 지정]", 19
PRINTL 
PRINT B　　
PRINTBUTTON "[-10]", 20
PRINTBUTTON "[-1]", 21
PRINTFORM  {B値, 3} 
PRINTBUTTON "[+1]", 22
PRINTBUTTON "[+10]", 23
PRINT 　　
PRINTBUTTON "[숫자 지정]", 29
PRINTL 

PRINTL
PRINTBUTTON "[997] 현재 설정 색상으로 되돌리기", 997
PRINT 　　　
PRINTBUTTON "[998] 기본 글자색으로 되돌리기", 998
PRINTL
DRAWLINE
IF 文字色グループ取得(対象キャラ) > -1
	SETCOLOR 同室時_グループ文字色:文字色グループ取得(対象キャラ)
	PRINTBUTTON @"[3000] 그룹{文字色グループ取得(対象キャラ), 2}에서 제외", 3000
	RESETCOLOR
	PRINTL
ELSE
	FOR LOCAL, 0, 5
		IF 同室時_グループ文字色:LOCAL
			SETCOLOR 同室時_グループ文字色:LOCAL
			PRINTBUTTONLC @"[{LOCAL + 1000}] 그룹{LOCAL, 2}에 등록", LOCAL + 1000
			PRINT 　　
			PRINTBUTTON @"[그룹{LOCAL, 2} 글자색 변경]", LOCAL + 2000
			PRINTL 
		ELSE
			PRINTFORMLC [----] 그룹{LOCAL, 2}: 글자색 미등록　　
			PRINTBUTTON @"[그룹{LOCAL, 2} 글자색 변경]", LOCAL + 2000
			PRINTL 
		ENDIF
		RESETCOLOR
	NEXT
ENDIF
DRAWLINE
PRINTBUTTONLC "[999] 표시명・글자색을 변경하지 않고 돌아가기", 999
PRINTL
PRINTL
PRINTBUTTONLC "[990] 표시명・글자색을 저장하고 돌아가기", 990

BINPUT
LOCAL = RESULT
SELECTCASE LOCAL
	CASE 3000
		CALL 文字色グループ削除(対象キャラ)
	CASE IS >= 2000
		CALL 同室時_グループ文字色変更(LOCAL - 2000)
	CASE IS >= 1000
		IF 同室時_グループ所属キャラ:(LOCAL - 1000) == ""
			同室時_グループ所属キャラ:(LOCAL - 1000) = _
		ENDIF
		同室時_グループ所属キャラ:(LOCAL - 1000) += @"{対象キャラ}_"
	CASE 995
		変更表示名 = 
	CASE 996
		DRAWLINE
		PRINTL 표시할 문자열을 입력해주세요.
		PRINTL
		INPUTS
		変更表示名 '= RESULTS
		PRINTFORMW 표시명을 %変更表示名%으로 설정했습니다.
	CASE 990
		IF 変更文字色 == デフォ色
			CFLAG:対象キャラ:同室文字色 = 0
		ELSE
			CFLAG:対象キャラ:同室文字色 = R値 * 256 * 256
			CFLAG:対象キャラ:同室文字色 += G値 * 256
			CFLAG:対象キャラ:同室文字色 += B値
		ENDIF
		CSTR:対象キャラ:同室者一覧表示名 '= 変更表示名
		RETURN 1
	CASE 997
		IF CFLAG:対象キャラ:同室文字色 == 0
			R値 = 192
			G値 = 192
			B値 = 192
		ELSE
			R値 = CFLAG:対象キャラ:同室文字色 / 256 / 256
			G値 = CFLAG:対象キャラ:同室文字色 / 256 % 256
			B値 = CFLAG:対象キャラ:同室文字色 % 256
		ENDIF
	CASE 998
		R値 = 192
		G値 = 192
		B値 = 192
	CASE 999
		RETURN 0
	CASE 0
		R値 = MAX(1, R値 - 10)
	CASE 1
		R値 = MAX(1, R値 - 1)
	CASE 2
		R値 = MIN(255, R値 + 1)
	CASE 3
		R値 = MIN(255, R値 + 10)
	CASE 9
		PRINTL R값의 숫자를 지정해주세요 (1～255)
		INPUT
		R値 = LIMIT(RESULT, 1, 255)
	CASE 10
		G値 = MAX(1, G値 - 10)
	CASE 11
		G値 = MAX(1, G値 - 1)
	CASE 12
		G値 = MIN(255, G値 + 1)
	CASE 13
		G値 = MIN(255, G値 + 10)
	CASE 19
		PRINTL G값의 숫자를 지정해주세요 (1～255)
		INPUT
		G値 = LIMIT(RESULT, 1, 255)
	CASE 20
		B値 = MAX(1, B値 - 10)
	CASE 21
		B値 = MAX(1, B値 - 1)
	CASE 22
		B値 = MIN(255, B値 + 1)
	CASE 23
		B値 = MIN(255, B値 + 10)
	CASE 29
		PRINTL B값의 숫자를 지정해주세요 (1~255)
		INPUT
		B値 = LIMIT(RESULT, 1, 255)
ENDSELECT


変更文字色 = R値 * 256 * 256
変更文字色 += G値 * 256
変更文字色 += B値
GOTO 表示LOOP




@文字色グループ取得(対象キャラ)
#FUNCTION
#DIM 対象キャラ

;キャラがどこの文字色グループに所属しているかを見る
FOR LOCAL, 0, VARSIZE("同室時_グループ文字色")
	IF STRFIND(同室時_グループ所属キャラ:LOCAL, @"_{対象キャラ}_") > -1
		RETURNF LOCAL
	ENDIF
NEXT

RETURNF -1

@文字色グループ削除(対象キャラ)
#DIM 対象キャラ

LOCAL = 文字色グループ取得(対象キャラ)
SIF LOCAL < 0
	RETURN 0

同室時_グループ所属キャラ:LOCAL = %REPLACE(同室時_グループ所属キャラ:LOCAL, @"_{対象キャラ}_", "_")%
SIF 同室時_グループ所属キャラ:LOCAL == "_"
	同室時_グループ所属キャラ:LOCAL = 

RETURN 1


@同室時_グループ文字色変更(グループ番号)
#DIM グループ番号
#DIM CONST デフォ色 = 12632256
#DIM 対象キャラ
#DIM 変更文字色
#DIM R値
#DIM G値
#DIM B値

IF 同室時_グループ文字色:グループ番号
	R値 =  同室時_グループ文字色:グループ番号 / 256 / 256
	G値 =  同室時_グループ文字色:グループ番号 / 256 % 256
	B値 =  同室時_グループ文字色:グループ番号 % 256
	変更文字色 =  同室時_グループ文字色:グループ番号
ELSE
	R値 = 192
	G値 = 192
	B値 = 192
	変更文字色 = デフォ色
ENDIF


$表示LOOP
DRAWLINE
PRINTL 동실자 목록 및 캐릭터 위치 표시 화면에서 사용할 글자색을 설정할 수 있습니다.
PRINTL 이 글자색은 연모나 섹스 파트너, 발정이나 임신보다 우선하여 표시되므로 주의해주세요.
DRAWLINE
PRINTFORM ・그룹{グループ番号, 2}의 현재 설정 글자색:
IF 同室時_グループ文字色:グループ番号
	SETCOLOR  同室時_グループ文字色:グループ番号
	PRINTFORML 샘플「그룹{グループ番号, 2}」
	RESETCOLOR
ELSE
	PRINTL 설정 없음
ENDIF
DRAWLINE

PRINT ・변경 후의 글자색:
IF 変更文字色
	SETCOLOR 変更文字色
	PRINTFORML 샘플「그룹{グループ番号, 2}」
	RESETCOLOR
ELSEIF 変更文字色 == デフォ色
	PRINTL 설정 없음
ENDIF
PRINTL
PRINTL ■RGB 지정
PRINT R　　
PRINTBUTTON "[-10]", 0
PRINTBUTTON "[-1]", 1
PRINTFORM  {R値, 3} 
PRINTBUTTON "[+1]", 2
PRINTBUTTON "[+10]", 3
PRINT 　　
PRINTBUTTON "[숫자 지정]", 9
PRINTL 
PRINT G　　
PRINTBUTTON "[-10]", 10
PRINTBUTTON "[-1]", 11
PRINTFORM  {G値, 3} 
PRINTBUTTON "[+1]", 12
PRINTBUTTON "[+10]", 13
PRINT 　　
PRINTBUTTON "[수치 지정]", 19
PRINTL 
PRINT Ｂ　　
PRINTBUTTON "[-10]", 20
PRINTBUTTON "[-1]", 21
PRINTFORM  {B値, 3} 
PRINTBUTTON "[+1]", 22
PRINTBUTTON "[+10]", 23
PRINT 　　
PRINTBUTTON "[수치 지정]", 29
PRINTL 

PRINTL
PRINTBUTTON "[997] 현재 설정색으로 되돌리기", 997
PRINT 　　　
PRINTBUTTON "[998] 설정 없음으로 하기", 998
PRINTL
DRAWLINE
PRINTBUTTONLC "[999] 변경하지 않고 돌아가기", 999
PRINTL
PRINTL
PRINTBUTTONLC "[990] 저장하고 돌아가기", 990

BINPUT
LOCAL = RESULT
SELECTCASE LOCAL
	CASE 990
		IF 変更文字色 == デフォ色
			PRINTL 그룹의 글자색을 설정 없음으로 한 경우, 이 그룹에 등록된 캐릭터가 모두 해제됩니다.
			PRINTL 괜찮습니까?
			PRINTBUTTONLC "[0] 예", 0
			PRINTBUTTONLC "[1] 아니오", 1
			IF RESULT == 0
				同室時_グループ文字色:グループ番号 = 0
				同室時_グループ所属キャラ:グループ番号 = 
			ENDIF
		ELSE
			同室時_グループ文字色:グループ番号 = R値 * 256 * 256
			同室時_グループ文字色:グループ番号 += G値 * 256
			同室時_グループ文字色:グループ番号 += B値
		ENDIF
		RETURN 1
	CASE 997
		IF 同室時_グループ文字色:グループ番号 == 0
			R値 = 192
			G値 = 192
			B値 = 192
		ELSE
			R値 = 同室時_グループ文字色:グループ番号 / 256 / 256
			G値 = 同室時_グループ文字色:グループ番号 / 256 % 256
			B値 = 同室時_グループ文字色:グループ番号 % 256
		ENDIF
	CASE 998
		R値 = 192
		G値 = 192
		B値 = 192
	CASE 999
		RETURN 0
	CASE 0
		R値 = MAX(1, R値 - 10)
	CASE 1
		R値 = MAX(1, R値 - 1)
	CASE 2
		R値 = MIN(255, R値 + 1)
	CASE 3
		R値 = MIN(255, R値 + 10)
	CASE 9
		PRINTL R값의 숫자를 지정해주세요 (1~255)
		INPUT
		R値 = LIMIT(RESULT, 1, 255)
	CASE 10
		G値 = MAX(1, G値 - 10)
	CASE 11
		G値 = MAX(1, G値 - 1)
	CASE 12
		G値 = MIN(255, G値 + 1)
	CASE 13
		G値 = MIN(255, G値 + 10)
	CASE 19
		PRINTL G값의 숫자를 지정해주세요 (1~255)
		INPUT
		G値 = LIMIT(RESULT, 1, 255)
	CASE 20
		B値 = MAX(1, B値 - 10)
	CASE 21
		B値 = MAX(1, B値 - 1)
	CASE 22
		B値 = MIN(255, B値 + 1)
	CASE 23
		B値 = MIN(255, B値 + 10)
	CASE 29
		PRINTL B값의 숫자를 지정해주세요 (1~255)
		INPUT
		B値 = LIMIT(RESULT, 1, 255)
ENDSELECT

変更文字色 = R値 * 256 * 256
変更文字色 += G値 * 256
変更文字色 += B値
GOTO 表示LOOP


