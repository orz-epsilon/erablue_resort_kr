;-------------------------------------------------
;ふともも脚瘦せエステ
;-------------------------------------------------
@MASSAGE_COMNAME12
#FUNCTIONS
TSTR:コマンド名受渡 = 허벅지 다리 슬리밍 에스테
SIF TALENT:TARGET:性別 == 2
	TSTR:コマンド名受渡 = 허벅지 마사지


;===================================================
;コマンドタイプ
;===================================================
@MASSAGE_COMTYPE_12
#FUNCTION
TFLAG:コマンドタイプ受渡 = MASSAGE_COMTYPE("微エロマッサージ")

@MASSAGE_COM_TOOLTIP_12
IF TALENT:TARGET:性別 == 2
	LOCALS = <br>■허벅지 마사지<br>
	LOCALS += "오일을 사용하여 허벅지를 마사지한다."
	LOCALS += "<br>COM 타입: 미묘한 에로 마사지<br>획득 소스: 쾌S・접촉・환락・노출"
	LOCALS += "<br>고유 획득 경험: 없음<br>"
	TSTR:ツールチップ受渡 = %LOCALS%
ELSE
	LOCALS = <br>■허벅지 다리 슬리밍 에스테<br>
	LOCALS += "오일을 사용하여 허벅지를 마사지한다."
	LOCALS += "<br>보습, 미용 효과 외에도 시술 후에는 부기가 빠져 아름다운 다리가 된다고 평판이 좋다."
	LOCALS += "<br>COM 타입: 미묘한 에로 마사지<br>획득 소스: 쾌S・접촉・환락・노출"
	LOCALS += "<br>고유 획득 경험: 없음<br>"
	TSTR:ツールチップ受渡 = %LOCALS%
ENDIF
@MASSAGE_COM12
;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------

IF 知識素質:TARGET:性知識 <= -1
;性知識がない場合、そもそも警戒することができない。そういうもんかって受け入れるため理性は下がり続けるし、快感を伴うから警戒も下がり続ける。
;……シヴァお前……
	BASE:TARGET:理性 += 理性変動値算出(TARGET, -50)
	BASE:TARGET:性欲 += 40
	BASE:TARGET:警戒 += 警戒変動値算出(TARGET, -50)
	CALL SOURCE_CALC_好感度要素_友情度UP(TARGET, PLAYER, 60)
	CALL SOURCE_CALC_好感度要素_恋心度UP(TARGET, PLAYER, 30)
	CALL SOURCE_CALC_好感度要素_性愛度UP(TARGET, PLAYER, 40)
ELSE
;ここらへんから警戒が下がりづらくなる。一応は真っ当な施術の範囲だし気持ちいいから理性は下がる。少しだけ性欲も煽られる。
	CALL SOURCE_CALC_好感度要素_友情度UP(TARGET, PLAYER, 60)
	CALL SOURCE_CALC_好感度要素_恋心度UP(TARGET, PLAYER, 30)
	CALL SOURCE_CALC_好感度要素_性愛度UP(TARGET, PLAYER, 40)
	BASE:TARGET:理性 += 理性変動値算出(TARGET, -50)
	BASE:TARGET:性欲 += 40
	BASE:TARGET:警戒 += 警戒変動値算出(TARGET, -20)
ENDIF

;血行促進で基礎体温が上がったりするらしいので、歓楽強め。リラックス効果も強め。
;お尻近くまで見られるってことで一応露出も上げとく
CALL SOURCE_CALC_快Ｓ(TARGET, PLAYER, 100)
CALL SOURCE_CALC_接触(TARGET, PLAYER, 75)
CALL SOURCE_CALC_歓楽(TARGET, PLAYER, 200)
CALL SOURCE_CALC_露出(TARGET, PLAYER, 50)

;むっちりした太腿にはこうかがばつぐんだ！
IF 下半身体型(TARGET) >= 1
	CALL SOURCE_CALC_快Ｓ(TARGET, PLAYER, 50)
	CALL SOURCE_CALC_歓楽(TARGET, PLAYER, 100)
ENDIF

IF TARGET == MASTER
	CALL ちんイラ増加処理(PLAYER, 35)
ELSE
	CALL ちんイラ増加処理(TARGET, 70)
ENDIF
;-------------------------------------------------
;経験の処理
;-------------------------------------------------

RETURN 1

;-------------------------------------------------
;実行判定
;-------------------------------------------------

@MASSAGE_COM_ABLE12
SIF SAVESTR:ゲームフェイズ管理 != "マッサージモード"
	RETURN 0

SIF GLOBAL_MASSAGE_COMABLE(12)
	RETURN RESULT

;仰向けだとダメ
SIF TCVAR:TARGET:マッサージ_うつ伏せフラグ == 0
	RETURN 0


RETURN 1

;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MASSAGE_MESSAGE_COM12
IF TALENT:TARGET:性別 == 2
	PRINTFORM %CALLNAME:PLAYER%은(는) 마사지 오일을 바른 손바닥으로%CALLNAME:TARGET%의
		IF TALENT:TARGET:体格 >= 1
		;長身以上
			PRINTFORM %TEXTR("살이 꽉 찬/근육질의")%
		ELSEIF TALENT:TARGET:体格 <= -1
		;小柄以下
			PRINTFORM 살집이 얇고 가녀린
		ENDIF
	PRINTFORML 허벅지를 정성껏 주물러 풀었다.
ELSE
	PRINTFORM %CALLNAME:PLAYER%은(는) 마사지 오일을 떨어뜨리고, 손바닥 전체를 사용하여 %CALLNAME:TARGET%의
		IF 下半身体型(TARGET) >= 1
		;肉感的以上
			PRINTFORM %TEXTR("탱탱한/말랑말랑한/탱탱하게 살이 붙은/말랑말랑하고 육감적인")%
		ELSEIF 下半身体型(TARGET) <= -2
		;細身以下
			PRINTFORM 살집이 얇은 가녀린
		ENDIF
	PRINTFORML 허벅지를 정성스럽게 주물러 풀었다.
ENDIF
