
;-------------------------------------------------
;罰ゲーム処理関連
;-------------------------------------------------
;代入した番号のキャラ相手に、罰ゲームを与えるか受けるかで分岐しつつ処理
;-------------------------------------------------
		
@罰ゲーム(キャラ番号, 勝敗)
#DIM キャラ番号
#DIMS 勝敗
#DIM 罰ゲーム種類
#DIMS 罰ゲーム候補, 50
#DIM 候補数


SELECTCASE 勝敗
	CASE "勝利"
		$INPUT_LOOP
		PRINTFORML %CALLNAME:キャラ番号%에게 어떤 벌칙 게임을 줄까?
		PRINTBUTTON "[0]이마 때리기", 0
		PRINTL 
		IF TALENT:キャラ番号:飲酒拒否 < 1
			PRINTBUTTON "[1]술 한 잔 마시기", 1
			PRINTL 
		ENDIF
		PRINTBUTTON "[2]몸에 손대기", 2
		PRINTL 
		PRINTL 
		CALL PRINT_えっちな罰ゲーム(キャラ番号)
		BINPUT
		
		罰ゲーム種類 = RESULT
		SELECTCASE RESULT
			CASE 0
				RFLAG:コマンド結果受渡し変数２ = 0
				PRINTFORML %CALLNAME:MASTER%은(는) 벌칙 게임으로 %CALLNAME:キャラ番号%의 이마를 가볍게 때렸다.
				PRINTFORML %CALLNAME:キャラ番号%은(는) 아픈 듯 이마를 손으로 문지르고 있다.
			CASE 1
				RFLAG:コマンド結果受渡し変数２ = 1
				;いずれ子供キャラにはジュースにしたり、酩酊処理を挟んだりするが今は仮実装
				PRINTFORML %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 술을 한 잔 마셨다.
				PRINTFORML %CALLNAME:キャラ番号%의 얼굴이 조금 붉어졌다.
				IF !初体験日:キャラ番号:初飲酒
					初体験日:キャラ番号:初飲酒 = DAY
					TCVAR:キャラ番号:初飲酒フラグ = 1
					CALL 履歴データベース登録(CFLAG:キャラ番号:人物番号, @"初めてリゾートでお酒を飲んだ","日常")
				ENDIF
				EXP:キャラ番号:飲酒経験 += RAND:3 + 1
				BASE:キャラ番号:酩酊 += RAND:100 + 100
				SIF BASE:キャラ番号:酩酊 >= 1000
					CFLAG:キャラ番号:酔いすぎ = 1
			CASE 2
				RFLAG:罰ゲーム中 = 1
				CALL COM306
				IF RESULT == -1
					GOTO INPUT_LOOP
				ENDIF
				RFLAG:コマンド結果受渡し変数２ = 2
				RFLAG:コマンド結果受渡し変数４ = TOINT(REPLACE(SELECTCOM_S, "306_", ""))
				CALLFORM MESSAGE_COM_S%RSTR:SELECTCOM_S受け渡し%
				;口上用に変数を戻す
				SELECTCOM_S = 
				RSTR:SELECTCOM_S受け渡し = 
			CASE 10 TO 18
				RFLAG:コマンド結果受渡し変数２ = RESULT
				CALL COM_えっちな罰ゲーム(キャラ番号, 罰ゲーム種類)
				CALL MESSAGE_えっちな罰ゲーム(キャラ番号, 罰ゲーム種類)
		ENDSELECT
		

	CASE "敗北"
		;出現可能な罰ゲームを登録
		VARSET 罰ゲーム候補
		罰ゲーム候補:0 = デコピン
		罰ゲーム候補:1 = 一気飲み
		候補数 = 2
		;体に触れる系はいるか？　いらない気がするぜぇ
		LOCAL = ABLE_えっちな罰ゲーム(キャラ番号, 1)
		SIF LOCAL >= 40
			罰ゲーム候補:(候補数++) = 下着の色を言う
		SIF LOCAL >= 50
			罰ゲーム候補:(候補数++) = セクシーポーズで淫語を言う
		SIF LOCAL >= 65 && TALENT:PLAYER:Ｂ感度 > -2
			罰ゲーム候補:(候補数++) = 乳首当てゲームをする
		SIF LOCAL >= 70
			罰ゲーム候補:(候補数++) = 尻を揉む
		SIF LOCAL >= 70
			罰ゲーム候補:(候補数++) = 胸を揉む
		SIF LOCAL >= 80 && TALENT:PLAYER:尻尾あり
			罰ゲーム候補:(候補数++) = 尻尾の付け根を揉む
		SIF LOCAL >= 80 && 体格差計算(キャラ番号, PLAYER) < 2
			罰ゲーム候補:(候補数++) = 肩組み乳揉み
		SIF LOCAL >= 80 && TALENT:PLAYER:Ｂ感度 > -2
			罰ゲーム候補:(候補数++) = 乳首ひっかき
		SIF LOCAL >= 90
			罰ゲーム候補:(候補数++) = 股間を弄る

		;罰ゲーム決定
		SELECTCASE 罰ゲーム候補:(RAND:候補数)
			CASE "デコピン"
				RFLAG:コマンド結果受渡し変数２ = 0
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 이마를 가볍게 때렸다.
				PRINTL 이마가 조금 따끔거린다…
			CASE "一気飲み"
				RFLAG:コマンド結果受渡し変数２ = 1
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%에게 술을 한 잔 마시게 했다.
				PRINTFORML %CALLNAME:PLAYER%은(는) 얼굴이 조금 붉어졌다.
				IF !初体験日:PLAYER:初飲酒
					初体験日:PLAYER:初飲酒 = DAY
					TCVAR:PLAYER:初飲酒フラグ = 1
					CALL 履歴データベース登録(CFLAG:PLAYER:人物番号, @"初めてリゾートでお酒を飲んだ","日常")
				ENDIF
				EXP:PLAYER:飲酒経験 += RAND:3 + 1
				BASE:PLAYER:酩酊 += RAND:100 + 100
				SIF BASE:PLAYER:酩酊 >= 1000
					CFLAG:PLAYER:酔いすぎ = 1
			CASE "下着の色を言う"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%에게 「속옷 색깔 말하기」를 요구했다.
				RFLAG:コマンド結果受渡し変数２ = 10
				PRINTFORM %CALLNAME:PLAYER%은(는) %CALLNAME:キャラ番号%에게
				IF TEQUIP:キャラ番号:下半身下着あり == 1 || TEQUIP:キャラ番号:下半身下着あり == -1
					PRINTW 옷을 살짝 내려 속옷을 조금 보여주었다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == 0
					PRINTW 안 입었다고 몰래 속삭였다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == 2
					PRINTW 앞치마를 하고 있다고 속삭였다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == 3
					PRINTW 훈도시라고 알려주었다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == 4
					PRINTW 리본으로 가리고 있을 뿐이라고 속삭였다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == -2
					PRINTW 피어스로 장식하고 있을 뿐이라고 속삭였다.
				ELSEIF TEQUIP:キャラ番号:下半身下着あり == -3
					PRINTW 사타구니를 드러내고, 음란한 표기의 명찰이 클리토리스에서 늘어져 있는 것을 보여주었다.
				ENDIF
				CALL SOURCE_CALC_露出(PLAYER, キャラ番号, 100)
				CALL SOURCE_CALC_好感度要素_友情度UP(PLAYER, キャラ番号, 10)
				CALL SOURCE_CALC_好感度要素_性愛度UP(PLAYER, キャラ番号, 20)
			CASE "セクシーポーズで淫語を言う"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%에게 「섹시 포즈로 음란한 말을 하기」를 요구했다.
				RFLAG:コマンド結果受渡し変数２ = 11
				;セクシーポーズで淫語
				CALL SOURCE_CALC_露出(PLAYER, キャラ番号, 200)
				CALL SOURCE_CALC_好感度要素_友情度UP(PLAYER, キャラ番号, 10)
				CALL SOURCE_CALC_好感度要素_性愛度UP(PLAYER, キャラ番号, 50)
				PRINTFORMW %CALLNAME:PLAYER%은(는) 도발적인 포즈를 보여주면서, %CALLNAME:キャラ番号%의 귓가에 음란한 대사를 속삭였다.
			CASE "乳首当てゲームをする"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%에게 「젖꼭지 맞추기 게임」을 요구했다.
				PRINTFORMW %CALLNAME:PLAYER%은(는) 승낙하고, 양손을 뒤로 돌려 %CALLNAME:キャラ番号%의 손가락을 기다리고 있다.
				RFLAG:コマンド結果受渡し変数２ = 12
				;乳首当てゲーム
				CALL SOURCE_CALC_露出(PLAYER, キャラ番号, 200)
				CALL SOURCE_CALC_快Ｂ(PLAYER, キャラ番号, 50)
				CALL SOURCE_CALC_好感度要素_友情度UP(PLAYER, キャラ番号, 30)
				CALL SOURCE_CALC_好感度要素_性愛度UP(PLAYER, キャラ番号, 100)
				SELECTCASE 乳首当て結果判定(PLAYER)
					CASE 0 TO 4
						RFLAG:コマンド結果受渡し変数４ = 1
						PRINTFORMW %CALLNAME:PLAYER%의 가슴에, 젖꼭지를 향해 손가락을 내밀었다.
						PRINTW 【명중!】
						PRINTFORMW %CALLNAME:キャラ番号%은(는) 멋지게 %CALLNAME:PLAYER%의 젖꼭지를 찔렀다!
						CALL SOURCE_CALC_快Ｂ(PLAYER, キャラ番号, 100)
					CASE 5 TO 9
						RFLAG:コマンド結果受渡し変数４ = -1
						PRINTFORMW %CALLNAME:PLAYER%의 가슴에, 젖꼭지를 향해 손가락을 내밀었다.
						PRINTW 【실패…】
						PRINTFORMW %CALLNAME:キャラ番号%은(는) 유두의 위치를 잘못 본 것 같다.
				ENDSELECT
			CASE "尻を揉む"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 320
				CALL CALL_COM(キャラ番号)
				;口上用に変数を戻す
				SELECTCOM = LOCAL
				CALL MESSAGE_COM320
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 13
			CASE "胸を揉む"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 321
				CALL CALL_COM(キャラ番号)
				SELECTCOM = LOCAL
				CALL MESSAGE_COM321
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 14
			CASE "尻尾の付け根を揉む"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 322
				CALL CALL_COM(キャラ番号)
				SELECTCOM = LOCAL
				CALL MESSAGE_COM322
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 15
			CASE "肩組み乳揉み"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 323
				CALL CALL_COM(キャラ番号)
				SELECTCOM = LOCAL
				CALL MESSAGE_COM323
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 16
			CASE "乳首ひっかき"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 324
				CALL CALL_COM(キャラ番号)
				SELECTCOM = LOCAL
				CALL MESSAGE_COM324
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 17
			CASE "股間を弄る"
				PRINTFORMW %CALLNAME:キャラ番号%은(는) 벌칙 게임으로 %CALLNAME:PLAYER%의 몸에 닿는 것을 선택한 것 같다.
				;CALL_COMを経由させる
				SWAP TARGET, PLAYER
				LOCAL = SELECTCOM
				RSTR:SELECTCOM_S受け渡し = 
				SELECTCOM_S = 
				SELECTCOM = 327
				CALL CALL_COM(キャラ番号)
				SELECTCOM = LOCAL
				CALL MESSAGE_COM327
				SWAP TARGET, PLAYER
				RFLAG:コマンド結果受渡し変数２ = 18
		ENDSELECT
ENDSELECT

TRYCALLFORM KOJO_EVENT_罰ゲーム_{NO:キャラ番号}(キャラ番号)


@PRINT_えっちな罰ゲーム(キャラ番号)
#DIM キャラ番号
;複数の罰ゲームに派生させるので別関数で処理する

RFLAG:罰ゲーム中 = 1
IF CFLAG:キャラ番号:好感度レベル < 50
	SETCOLOR 0x666666
	PRINTPLAIN ▼야한 벌칙 게임 (호감도 레벨이 부족합니다)
	PRINTL
	RESETCOLOR
ELSE
	PRINTL ▼야한 벌칙 게임
	;いずれ脱衣も実装する……絶対にだ……
	IF ABLE_えっちな罰ゲーム(キャラ番号) > 40
		PRINT ├
		PRINTBUTTON "[10]속옷 색깔을 말하다", 10
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[10]속옷 색깔을 말하다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	IF ABLE_えっちな罰ゲーム(キャラ番号) > 50
		PRINT ├
		PRINTBUTTON "[11]섹시 포즈로 음란한 말을 하다", 11
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[11]섹시 포즈로 음란한 말을 하다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	IF ABLE_えっちな罰ゲーム(キャラ番号) > 65 && TALENT:キャラ番号:Ｂ感度 > -2
		PRINT ├
		PRINTBUTTON "[12]유두 맞히기 게임을 하다", 12
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[12]유두 맞히기 게임을 하다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE320
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 70
		PRINT ├
		PRINTBUTTON "[13]엉덩이를 주무르다", 13
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[13]엉덩이를 주무르다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE321
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 70
		PRINT ├
		PRINTBUTTON "[14]가슴을 주무르다", 14
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[14]가슴을 주무르다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE322
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 80
		PRINT ├
		PRINTBUTTON "[15]꼬리 뿌리를 주무르다", 15
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[15]꼬리 뿌리를 주무르다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE323
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 80
		PRINT ├
		PRINTBUTTON "[16]어깨동무 가슴 주무르기", 16
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[16]어깨동무 가슴 주무르기 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE324
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 80
		PRINT ├
		PRINTBUTTON "[17]젖꼭지 긁기", 17
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN ├[17]젖꼭지 긁기 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
	CALL COM_ABLE327
	IF RESULT && ABLE_えっちな罰ゲーム(キャラ番号) > 90
		PRINT └
		PRINTBUTTON "[18]사타구니를 만지작거리다", 18
		PRINTL 
	ELSE
		SETCOLOR 0x666666
		PRINTPLAIN └[18]사타구니를 만지작거리다 (조건이 부족합니다)
		PRINTL 
		RESETCOLOR
	ENDIF
ENDIF




@ABLE_えっちな罰ゲーム(キャラ番号, 実行側フラグ = 0)
#FUNCTION
#DIM キャラ番号
#DIM 許容値
#DIM 実行側フラグ
;どこまで罰ゲームを許してくれるかを表す数値、高いほどいろいろ許してくれる

;初期値は好感度レベル
許容値 = CFLAG:キャラ番号:好感度レベル

;素質に手を入れた後にいずれ色々追加すること

;あなたが実行側の時のみ影響
IF 実行側フラグ == 0
	;賭博師の風格持ち時、プラス補正
	SIF あなた特殊能力:ギャンブラー == 2
		許容値 += 50
ENDIF

;性欲なしはダメ
SIF TALENT:キャラ番号:性欲 == -2
	許容値 = 0

RETURNF 許容値



@COM_えっちな罰ゲーム(キャラ番号, ARG)
#DIM キャラ番号

SELECTCASE ARG
	CASE 10
		;下着の色を言う
		CALL SOURCE_CALC_露出(キャラ番号, PLAYER, 100)
		CALL SOURCE_CALC_好感度要素_友情度UP(キャラ番号, PLAYER, 10)
		CALL SOURCE_CALC_好感度要素_性愛度UP(キャラ番号, PLAYER, 20)
	CASE 11
		;セクシーポーズで淫語
		CALL SOURCE_CALC_露出(キャラ番号, PLAYER, 200)
		CALL SOURCE_CALC_好感度要素_友情度UP(キャラ番号, PLAYER, 10)
		CALL SOURCE_CALC_好感度要素_性愛度UP(キャラ番号, PLAYER, 50)
	CASE 12
		;乳首当てゲーム
		; CALL SOURCE_CALC_露出(キャラ番号, PLAYER, 200)
		; CALL SOURCE_CALC_快Ｂ(キャラ番号, PLAYER, 50)
		; CALL SOURCE_CALC_好感度要素_友情度UP(キャラ番号, PLAYER, 30)
		; CALL SOURCE_CALC_好感度要素_性愛度UP(キャラ番号, PLAYER, 100)
		; SELECTCASE 乳首当て結果判定(キャラ番号)
		; 	CASE 0 TO 4
		; 		RFLAG:コマンド結果受渡し変数４ = 1
		; 		CALL SOURCE_CALC_快Ｂ(キャラ番号, PLAYER, 100)
		; 	CASE 5 TO 8
		; 		RFLAG:コマンド結果受渡し変数４ = -1
		; 	CASE 9
		; 		RFLAG:コマンド結果受渡し変数４ = 2
		; 		CALL SOURCE_CALC_快Ｂ(キャラ番号, PLAYER, 150)
		; ENDSELECT
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 325
		CALL CALL_COM(キャラ番号)
		;口上用に変数を戻す
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 12
	CASE 13
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 320
		CALL CALL_COM(キャラ番号)
		;口上用に変数を戻す
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 13
	CASE 14
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 321
		CALL CALL_COM(キャラ番号)
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 14
	CASE 15
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 322
		CALL CALL_COM(キャラ番号)
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 15
	CASE 16
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 323
		CALL CALL_COM(キャラ番号)
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 16
	CASE 17
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 324
		CALL CALL_COM(キャラ番号)
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 17
	CASE 18
		;弱点コマンド処理の都合上、CALL_COMを経由させる
		LOCAL = SELECTCOM
		RSTR:SELECTCOM_S受け渡し = 
		SELECTCOM_S = 
		SELECTCOM = 327
		CALL CALL_COM(キャラ番号)
		SELECTCOM = LOCAL
		RFLAG:コマンド結果受渡し変数２ = 18
ENDSELECT

CALL SOURCE_補正処理(キャラ番号)


@MESSAGE_えっちな罰ゲーム(キャラ番号, ARG)
#DIM キャラ番号

IF FLAG:汎用文章表示切り替えオプション > 0
	IF PLAYER == MASTER
		IF TCVAR:PLAYER:弱点コマンドフラグ
			DRAWLINE
			SETCOLOR カラーパレット("えっちな色")
			PRINTFORMW <<<약점 커맨드!! (%CALLNAME:PLAYER%)>>>
			RESETCOLOR
		ELSEIF TCVAR:PLAYER:弱点シチュフラグ
			SETCOLOR カラーパレット("えっちな色")
			PRINT <<<약점 시츄에이션
			PRINT_IMG "えっちハート"
			PRINTFORML (%CALLNAME:PLAYER%)>>>
			RESETCOLOR
		ENDIF
	ENDIF
	FOR LOCAL, 1, CHARANUM
		SIF TARGET:LOCAL < 1
			BREAK
		IF TCVAR:(TARGET:LOCAL):弱点コマンドフラグ
			DRAWLINE
			SETCOLOR カラーパレット("えっちな色")
			PRINTFORMW <<<약점 커맨드!!（%CALLNAME:(TARGET:LOCAL)%）>>>
			RESETCOLOR
		ELSEIF TCVAR:(TARGET:LOCAL):弱点シチュフラグ
			SETCOLOR カラーパレット("えっちな色")
			PRINT <<<약점 시츄에이션
			PRINT_IMG "えっちハート"
			PRINTFORML （%CALLNAME:(TARGET:LOCAL)%）>>>
			RESETCOLOR
		ENDIF
	NEXT
ENDIF

RESULT = 0
TRYCALL MESSAGE_えっちな罰ゲーム_MOD(キャラ番号, ARG)
SIF RESULT != 0
	RETURN

SELECTCASE ARG
	CASE 10
		;下着の色を言う
		PRINTFORM %CALLNAME:キャラ番号%은(는)
		IF TALENT:キャラ番号:羞恥心 > 0
			PRINT 얼굴을 새빨갛게 물들이며
		ELSEIF TALENT:キャラ番号:羞恥心 < 0
			PRINT 아무렇지도 않은 얼굴로
		ELSE
			PRINT 조금 부끄러운 듯이
		ENDIF
		IF TEQUIP:キャラ番号:下半身下着あり == 1
			PRINTW 자신의 속옷 색깔을 알려주었다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == 0
			PRINTW 입고 있지 않다는 것을 알려주었다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == 2
			PRINTW 앞가리개라고 알려주었다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == 3
			PRINTW 훈도시라고 알려주었다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == 4
			PRINTW 리본으로 가리고 있을 뿐이라고 알려주었다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == -2
			PRINTW 피어스로 장식되어 있을 뿐인 성기를 드러냈다.
		ELSEIF TEQUIP:キャラ番号:下半身下着あり == -3
			PRINTW 사타구니를 드러내고, 음란한 표기의 명찰이 음핵에서부터 늘어져 있는 것을 보여주었다.
		ENDIF
	CASE 11
		;セクシーポーズで淫語
		PRINTFORM %CALLNAME:キャラ番号%은(는)
		IF TALENT:キャラ番号:羞恥心 > 0
			PRINTL 진심으로 부끄러워하며
		ELSEIF TALENT:キャラ番号:羞恥心 < 0
			PRINTL 조금 내키는 듯한 모습으로
		ELSE
			PRINTL 곤란한 듯 웃으며
		ENDIF
		IF 知識素質:キャラ番号:性知識 < 1
			PRINTW 엉뚱한 포즈와 말을 선보였다.
		ELSEIF 知識素質:キャラ番号:性知識 < 3
			PRINTW 어색한 섹시 포즈를 취하고, 온 힘을 다해 야한 말을 늘어놓았다.
		ELSEIF 知識素質:キャラ番号:性知識 < 5
			PRINTW 매혹적인 포즈를 취하고, 성욕을 자극하는 듯한 과격한 말을 했다.
		ELSE
			PRINTFORMW 도저히 아이에게는 보여줄 수 없는 끔찍한 포즈를 보여주며, %CALLNAME:MASTER%의 귓가에 음란한 대사를 속삭였다.
		ENDIF
	CASE 12
		;乳首当てゲーム
		IF TALENT:キャラ番号:羞恥心 > 0
			PRINT 뺨을 붉게 물들이고 눈을 감고 기다린다
		ELSEIF TALENT:キャラ番号:羞恥心 < 0
			PRINT 맞힐 수 있을까? 하고 웃는다
		ELSE
			PRINT 
		ENDIF
		PRINTFORMW %CALLNAME:キャラ番号%의 가슴에, 유두를 향해 손가락을 내밀었다.
		CALL 乳首当てゲーム結果メッセージ(キャラ番号)
	CASE 13
		CALL MESSAGE_COM320
	CASE 14
		CALL MESSAGE_COM321
	CASE 15
		CALL MESSAGE_COM322
	CASE 16
		CALL MESSAGE_COM323
	CASE 17
		CALL MESSAGE_COM324
	CASE 18
		CALL MESSAGE_COM327
ENDSELECT


@乳首当て結果判定(対象キャラ)
#FUNCTION
#DIM 対象キャラ

SIF TEQUIP:対象キャラ:上半身下着あり == -3
	RETURNF 0
SIF !GROUPMATCH(TEQUIP:対象キャラ:上半身下着あり, 1, 3) && RAND:5
	RETURNF 0
IF MAX(TEQUIP:対象キャラ:上半身鎧あり, TEQUIP:対象キャラ:上半身服あり, TEQUIP:対象キャラ:上タイツあり, GROUPMATCH(TEQUIP:対象キャラ:上半身下着あり, 1, 3)) == 0
	RETURNF 0
ELSE
	RETURNF RAND:10
ENDIF


