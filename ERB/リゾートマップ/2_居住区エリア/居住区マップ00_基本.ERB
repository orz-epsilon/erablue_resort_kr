
@大規模エリア建設条件_居住区エリア(建築位置)
#DIM 建築位置
;一個まで
SIF MATCH(開拓エリア開発番号, 大規模番号_居住区エリア) > 0
	RETURN 0
;イベント見ること
SIF イベント完了フラグ確認("居住区エリア建設解禁") < 1
	RETURN 0

RETURN 1

@大規模エリア解説文章_居住区エリア
LOCALS = 
LOCALS += "리조트 섬에 사람들이 정주 가능하게 되는 지역. <br>"
LOCALS += "정주자는 리조트의 체류 공간을 전유하지 않지만, 하루 종료 시의 루피 수입도 발생시키지 않는다. <br>"
LOCALS += "첫 방문 시 일반 의상 「스모크」「간호사복」을 입수. ZP 상점에 「보육원 아이를 성장시킨다」를 추가. <br>"
LOCALS += "<br>"
LOCALS += "・특수 시설 목록<br>"
LOCALS += "　■주택가<br>"
LOCALS += "　　정주자가 숙박하는 장소. 캐릭터마다 개별 방을 가진다. <br>"
LOCALS += "　　일정 이상 사이가 좋은 캐릭터끼리는 같은 방에 살기도 한다. <br>"
LOCALS += "<br>"
LOCALS += "　■보육원<br>"
LOCALS += "　　아이를 보호하고 키우는 장소. 리조트에서 태어난 아이의 모습을 볼 수 있다. <br>"

詳細文文字列受け渡し変数 = %LOCALS%

;建設値段を返す
RETURN 2000000

@MAP_VIEWING_2(AA)
#DIMS REF AA, 0
TRYCALLFORM MAP_RESORT_2_{TFLAG:マップ種別}(AA)

@エリア情報登録_2(ARGS)
SELECTCASE ARGS
	CASE "エリア名"
		TSTR:場所名受渡 = 주거 지역
	CASE "エリア移動可能場所"
		RETURN 1
ENDSELECT



@MAP_RESORT_2_0(AA)
#DIMS REF AA, 0
#DIM MAP

MAP = 0
IF 居住区改造度:0:0
	AA:(MAP++) = ┏━┓　　　┏━━┓┏━━┓┏━━┓┏┓│　│　　　┏━┓│　│　　　‖川　‖
	AA:(MAP++) = ┗━┛┏━┓┗━┓┃┗━━┛┗━━┛┗┛│　│　　　┃　┃│　│　　　‖川川‖
	AA:(MAP++) = ┏━┓┃　┃┏━┛┃┏━┓┏━━┓┏━┓│　│┏━┓┃　┃│　│　　　‖　川‖
	AA:(MAP++) = ┃　┃┗━┛┗━━┛┗━┛┗━━┛┗━┛│　│┃10┃┃　┃│　│　　　‖　　‖
	AA:(MAP++) = ┗━┛┏━━┓┏━┓┏━━┓┏━┓┏━┓│　│┗━┛┃　┃│　│　　　‖川　‖
	AA:(MAP++) = ┏┓　┗━━┛┗━┛┗━━┛┗━┛┃　┃│　│┏━┓┃02┃│　│　　　‖川川‖
	AA:(MAP++) = ┃┗┓┏━┓┏━━┓┏━┓┏━━┓┗━┛│　│┃　┃┃　┃│　│　　　‖　川‖
	AA:(MAP++) = ┗━┛┗━┛┃┏━┛┗━┛┗━━┛┏━┓│　│┃　┃┃　┃│　│　　　‖　　‖
	AA:(MAP++) = ┏━┓┏━┓┗┛　　　　　　┏━┓┃　┃│　│┃03┃┃　┃│　│　12　‖川　‖
	AA:(MAP++) = ┗┓┃┃　┃┏━┓　住宅街　┗━┛┃　┃│　│┃　┃┗━┛│　│　　　‖川川‖
	AA:(MAP++) = 　┗┛┃　┃┗━┛　　　　　　┏┓┗━┛│　│┃　┃┏━┓│　│　　　‖　川‖
	AA:(MAP++) = ┏━┓┗━┛┏━━┓┏━┓┏━┛┃┏━┓│　│┗━┛┃　┃│　│　　　‖　　‖
	AA:(MAP++) = ┗━┛┏━┓┗━━┛┗━┛┗━━┛┗━┛│　│┏━┓┃　┃│　│　　　‖川　‖
	AA:(MAP++) = ┏━┓┃　┃┏━┓┏━━┓┏━┓┏━━┓│　│┃　┃┃11┃│　│　　　‖川川‖
	AA:(MAP++) = ┃　┃┗━┛┗━┛┗━━┛┗━┛┗━━┛│　│┃04┃┃　┃│　│　　　‖　川‖
	AA:(MAP++) = ┃　┃┏━┓┏━━┓┏━┓┏━━┓┏━┓│　│┃　┃┃　┃│　│　　　‖　　‖
	AA:(MAP++) = ┗━┛┗━┛┗━━┛┗━┛┗━━┛┗━┛│　│┗━┛┗━┛│　│　　　‖川　‖
	AA:(MAP++) = ────────────────────┘　└──────┘　└───────
	IF 居住区改造度:14:0
		AA:(MAP++) = 　　　　　　　　　　　　　　　　　　　　　01　　　　　　　　　　　　　　　14→
	ELSE
		AA:(MAP++) = 　　　　　　　　　　　　　　　　　　　　　01
	ENDIF
	AA:(MAP++) = ────────────────────┐　┌────────────────
	AA:(MAP++) = 　┏━┓┏━━━━━━━┓┏━━━━━┓│　│　　　　　　　┏━━━┓‖川　‖
	AA:(MAP++) = 　┃　┃┃　　　05　　　┃┃　　06　　┃│　│　　　　　　　┃　　　┃‖川川‖
	AA:(MAP++) = 　┃　┃┗━━━━━━━┛┗━━━━━┛│　│　　　　　　　┃　13　┃‖　川‖
	AA:(MAP++) = 　┃07┃　08┏━━━┓┏━━┓┏━━━┓│　│　　　　　　　┃　　　┃‖　　‖
	AA:(MAP++) = 　┃　┗━┓┃　　　┃┃　　┃┃　09　┃│　│　　　　　　　┗━━━┛‖川　‖
	AA:(MAP++) = 　┃　　　┃┗━━━┛┗━━┛┃　　　┃│　│　　　　　　　　　　　　‖川川‖
	AA:(MAP++) = 　┗━━━┛┏━━━━━━━┓┗━━━┛│　│　　　　　　　　　　　　‖　川‖
	AA:(MAP++) = 
	AA:(MAP++) = 01：ア　　14：二丁目へ
	AA:(MAP++) = 02：公園　　　　　03：地元向け商店　04：保育所　　　　05：診療所
	AA:(MAP++) = 06：郵便局　　　　07：酒呑処　　　　08：路地裏　　　　09：村役場
	AA:(MAP++) = 10：純喫茶店　　　11：自警団詰め所　12：イ　　　　13：学校
ELSE
	AA:(MAP++) = ┏━┓┏━━┓┏━┓┏━━┓┏━┓│　│┏━┓
	AA:(MAP++) = ┗━┛┗━━┛┗━┛┗━━┛┗━┛│　│┃02┃
	AA:(MAP++) = ┏━━┓┏━┓┏━━┓┏━┓┏━┓│　│┗━┛
	AA:(MAP++) = ┗━━┛┗━┛┗━━┛┗━┛┃　┃│　│┏━┓
	AA:(MAP++) = ┏━┓┏━━┓┏━┓┏━━┓┗━┛│　│┃　┃
	AA:(MAP++) = ┗━┛┃┏━┛┗━┛┗━━┛┏━┓│　│┃　┃
	AA:(MAP++) = ┏━┓┗┛　　　　　　┏━┓┃　┃│　│┃03┃
	AA:(MAP++) = ┃　┃┏━┓　住宅街　┗━┛┃　┃│　│┃　┃
	AA:(MAP++) = ┃　┃┗━┛　　　　　　┏┓┗━┛│　│┃　┃
	AA:(MAP++) = ┗━┛┏━━┓┏━┓┏━┛┃┏━┓│　│┗━┛
	AA:(MAP++) = ┏━┓┗━━┛┗━┛┗━━┛┗━┛│　│┏━┓
	AA:(MAP++) = ┃　┃┏━┓┏━━┓┏━┓┏━━┓│　│┃　┃
	AA:(MAP++) = ┗━┛┗━┛┗━━┛┗━┛┗━━┛│　│┃04┃
	AA:(MAP++) = ┏━┓┏━━┓┏━┓┏━━┓┏━┓│　│┃　┃
	AA:(MAP++) = ┗━┛┗━━┛┗━┛┗━━┛┗━┛│　│┗━┛
	AA:(MAP++) = ─────────────────┘　└───
	AA:(MAP++) = 　　　　　　　　　　　　　　　　　　01
	AA:(MAP++) = ─────────────────┐　┌───
	AA:(MAP++) = 　┏━━━━━━━┓┏━━━━━┓│　│
	AA:(MAP++) = 　┃　　　05　　　┃┃　　06　　┃│　│
	AA:(MAP++) = 　┗━━━━━━━┛┗━━━━━┛│　│
	AA:(MAP++) = 
	AA:(MAP++) = 01：ア
	AA:(MAP++) = 02：公園　　　　　03：地元向け商店　04：保育所
	AA:(MAP++) = 05：診療所　　　　06：郵便局
ENDIF



@GETPLACENAME_2_0(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 1
		TSTR:場所名受渡 = 주택가 앞 교차로
	CASE 2
		TSTR:場所名受渡 = 공원
	CASE 3
		TSTR:場所名受渡 = 지역 주민용 상점
	CASE 4
		TSTR:場所名受渡 = 보육원
	CASE 5
		TSTR:場所名受渡 = 진료소
	CASE 6
		TSTR:場所名受渡 = 우체국
	CASE 7
		TSTR:場所名受渡 = 술집
	CASE 8
		TSTR:場所名受渡 = 골목길
	CASE 9
		TSTR:場所名受渡 = 마을회관
	CASE 10
		TSTR:場所名受渡 = 순수 찻집
	CASE 11
		TSTR:場所名受渡 = 자경단 사무소
	CASE 12
		TSTR:場所名受渡 = 강변
	CASE 13
		TSTR:場所名受渡 = 학교
	CASE 14
		TSTR:場所名受渡 = 2번가로
ENDSELECT

@GETPLACENAME_2_10(ARG)
#FUNCTION
#DIMS 配列分解文字列, 2

IF 定住者部屋割り配列:(ARG - 1000) == ""
	LOCALS = 거주자 없음
ELSE
	VARSET 配列分解文字列
	SPLIT 定住者部屋割り配列:(ARG - 1000), "_", 配列分解文字列
	IF STRCOUNT(定住者部屋割り配列:(ARG - 1000), "_") > 1
		LOCALS = %CALLNAME:(TOINT(配列分解文字列:0))%외
	ELSE
		LOCALS = %CALLNAME:(TOINT(配列分解文字列:0))%
	ENDIF
ENDIF
TSTR:場所名受渡 = 주택가{ARG}번지：%LOCALS%

@GETPLACENAME_2_11(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_12(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_13(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_14(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_15(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_16(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_17(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_18(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)

@GETPLACENAME_2_19(ARG)
#FUNCTION

CALLF GETPLACENAME_2_10(ARG)


@DRAW_MAP_BG_2_0(SLICED, 表示文字列)
#DIMS REF 表示文字列
#DIMS SLICED
SELECTCASE SLICED
	CASE "ア"
		表示文字列 += "주택가 앞 교차로"
	CASE "イ"
		表示文字列 += "강변"
	CASE "住","宅","街"
		IF CFLAG:PLAYER:現在位置 >= 1000
			表示文字列 += @"<font color='#%カラーパレット_HTML("真っ赤")%'>%SLICED%</font>"
		ELSE
			表示文字列 += @"%SLICED%"
		ENDIF
	CASE "川","‖"
		表示文字列 += @"<font color='#0067C0'>%SLICED%</font>"
	;ふつうの
	CASEELSE
		表示文字列 += @"%SLICED%"
ENDSELECT



@エリア来訪時イベント_2

IF 居住区初来訪イベントフラグ == 0
	DRAWLINE
	PRINTL ［첫 방문：주거 지역］
	DRAWLINE
	PRINTW
	PRINTFORMW %CALLNAME:PLAYER%은(는) 섬을 개척하고, 비어있는 지역에 건설한 주거 구역을 방문했다.
	PRINTFORMW 이미 몇몇 정주 희망자들이 이사 와 있으며, 공원에서는 아이들이 노는 소리도 들려온다.
	PRINTFORMW 리조트를 크게 하려면, 지역 산업이 성장하는 것도 중요하다.
	PRINTFORMW 언제까지나 외부로부터의 수입에 의존해서는 아무리 루피가 있어도 부족할 것이다.
	PRINTL 
	PRINTFORMW 현 상황에서는 작은 마을에 불과하지만, 앞으로 발전해나가면 도시라고 부를 수 있을 만한 규모로도 성장할 것이다.
	PRINTL 
	PRINTFORMW 또한, 사람이 늘어나면 상업도 활성화된다. 상업이 활성화되면 사람도 늘어난다.
	PRINTFORMW 공정항의 상점 거리를 강화하면, 정주자들이 가게를 열어줄 수도 있을 것이다.
	PRINTFORMW 여유가 있다면 그쪽도 개발을 진행해두자.
	PRINTL
	SETCOLOR カラーパレット("黄")
	PRINTFORMW 보육원 완성으로 통상 의상 「스모크」를 입수했다.
	PRINTFORMW 진료소 완성으로 통상 의상 「간호사복」을 입수했다.
	RESETCOLOR
	CALL 制服登録処理("スモック")
	CALL 制服登録処理("ナース服")
	居住区初来訪イベントフラグ = 1
ENDIF

IF 居住区二丁目初来訪イベントフラグ == 0 && 居住区改造度:14:0
	DRAWLINE
	PRINTL ［첫 방문: 주거 구역 에리어・2번가］
	DRAWLINE
	PRINTW
	PRINTFORMW %CALLNAME:PLAYER%은(는) 확장된 주거 구역을 방문했다.
	PRINTFORMW 최근에는 이주 희망자가 더욱 늘어나, 이제는 마을 이상의 규모로 성장하고 있다.
	PRINTFORMW 인구가 늘어나면 리조트의 발전도 더욱 진행될 것이다.
	PRINTL 
	PRINTFORMW 또한, 이번에 확장한 토지에는 결혼식장과 미술관을 건설했다.
	PRINTFORMW 이로써 주민들은 이 섬에서 식을 올릴 수 있고, '리조트 웨딩'이라는 명목으로 관광객도 기대할 수 있을 것이다.
	PRINTFORMW 물론, 자기 자신의 식에 사용해도 좋다. 원하는 상대가 있다면 말이지만.
	PRINTL 
	PRINTFORMW 미술관 쪽은 아직 전시품이 그리 충실하지 않다.
	PRINTFORMW 언젠가 여유가 생기면 역사적인 미술품을 사 모으거나,
	PRINTFORMW 아니면 관광객이나 주민들에게 전시물을 모집해 보는 것도 재미있을 것이다. (미구현입니다)
	PRINTL 
	PRINTFORMW 우려되는 점은 인구 증가로 인한 문제 증가이지만……
	PRINTFORM 지금까지는 주민들의 자치에 맡겼지만, 마을회관에서
	SETCOLOR カラーパレット("黄")
	PRINTFORM 조례를 설정하고, 발표하는
	RESETCOLOR
	PRINTFORMW 것도 고려하는 편이 좋을지도 모른다.
	PRINTL 
	PRINTFORMW 어쨌든, 궤도에 올랐다는 것은 확실하다.
	PRINTFORMW 이대로 개발을 진행해 나가자.
	PRINTL
	SETCOLOR カラーパレット("黄")
	PRINTFORMW 결혼식장 완성으로 통상 의상 '웨딩드레스'를 입수했다.
	PRINTFORMW 결혼식장 완성으로 에로 의상 '웨딩 비키니'를 입수했다.
	PRINTFORMW 결혼식장 완성으로 통상 의상 '화이트 턱시도'를 입수했다.
	PRINTFORMW 결혼식장 완성으로 통상 의상 '수도복'을 입수했다.
	RESETCOLOR
	CALL 制服登録処理("ウエディングドレス")
	CALL エロ衣装登録処理("ウエディングビキニ")
	CALL 制服登録処理("ホワイトタキシード")
	CALL 制服登録処理("修道服")
	居住区二丁目初来訪イベントフラグ = 1
ENDIF

@居住区改造メニュー()
#FUNCTIONS
;100~199と999は大本のメニュー操作で使うため、使用しないこと

LOCALS = 주거 구역을 발전시켜, 거주 가능 수나 시설을 늘립니다. <br><br>
IF 居住区改造度:0:0 < 1
	LOCALS += @"■<button value='200'>[주거 구역 발전]</button> Lv{居住区改造度:0:0}>{居住区改造度:0:0 + 1} (필요:2,000,000 루피)<br>"
ELSE
	LOCALS += @"■[주거 구역 발전] Lv{居住区改造度:0:0}: 상한<br>"
	IF 居住区改造度:14:0 < 1
		LOCALS += @"■<button value='201'>[주거 구역 확장: 2번가]</button> Lv{居住区改造度:14:0}>{居住区改造度:14:0 + 1} (필요:2,000,000 루피)<br>"
	ELSE
		LOCALS += @"■[주거 구역 확장: 2번가] Lv{居住区改造度:14:0}: 상한<br>"
	ENDIF
ENDIF

RETURNF LOCALS

@居住区改造実行関数(コマンド数値)
#DIM コマンド数値

SELECTCASE コマンド数値
	CASE 200
		DRAWLINE
		PRINTL 주거 구역에 다음 변경 사항이 도입됩니다.
		PRINTBUTTON "■주거 구역 확장", 500
		PRINTL 
		PRINTBUTTON "■시설 추가", 501
		PRINTL 
		PRINTL 
		PRINTL 주거 구역을 발전시키겠습니까? (필요:2,000,000 루피)
		PRINTBUTTONLC "[0] 예", 0
		PRINTBUTTONLC "[1] 아니요", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < 2000000
					PRINTW 루피가 부족합니다.
					RETURN
				ENDIF
				ARRAYSHIFT 定住者部屋割り配列, 住宅街広さ(), "", 住宅街広さ() + 30
				居住区改造度:0:0 = 1
				MONEY -= 2000000
				PRINTL 주거 구역을 발전시켰습니다!
				CALL RESET_GRAPH_2
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号, @" 居住区エリアをLv1に発展させた","実績")
				RETURN
			CASE 1
				RETURN
			CASE 500
				DRAWLINE
				PRINTL 주거 구역의 틀이 50칸에서 80칸으로 확대됩니다.
				PRINTL 이를 통해 더 많은 캐릭터를 정착시킬 수 있게 됩니다.
				PRINTW
			CASE 501
				DRAWLINE
				PRINTL 새로운 7개의 시설이 추가됩니다.
				PRINTL (술집, 뒷골목, 마을회관, 순수 찻집, 자경단 사무소, 강변, 학교)
				PRINTL 현재는 이 시설들에 특별한 기능은 없지만, 앞으로 구현될 가능성이 있습니다.
				PRINTW
		ENDSELECT
		RESTART
	CASE 201
		DRAWLINE
		PRINTL 주거 구역에 다음 변경 사항이 도입됩니다.
		PRINTBUTTON "■2번가 개별 맵 해방", 500
		PRINTL 
		PRINTBUTTON "■시설 추가", 501
		PRINTL 
		PRINTL 
		PRINTL 주거 구역에 2번가를 만드시겠습니까? (필요:2,000,000루피)
		PRINTBUTTONLC "[0] 예", 0
		PRINTBUTTONLC "[1] 아니요", 1
		BINPUT
		SELECTCASE RESULT
			CASE 0
				IF MONEY < 2000000
					PRINTW 루피가 부족합니다.
					RETURN
				ENDIF
				ARRAYSHIFT 定住者部屋割り配列, 住宅街広さ(), "", 住宅街広さ() + 20
				居住区改造度:14:0 = 1
				MONEY -= 2000000
				PRINTL 주거 구역에 2번가를 만들었습니다!
				CALL RESET_GRAPH_2
				CALL 履歴データベース登録(CFLAG:MASTER:人物番号, @" 居住区エリアに二丁目を作成した","実績")
				RETURN
			CASE 1
				RETURN
			CASE 500
				DRAWLINE
				PRINTL 주거 구역의 칸이 20칸 추가로 확대됩니다.
				PRINTL 이로 인해, 더 많은 캐릭터를 정착시킬 수 있게 됩니다.
				PRINTW
			CASE 501
				DRAWLINE
				PRINTL 새로운 2개의 시설이 추가됩니다.
				PRINTL (결혼식장, 미술관)
				PRINTL 결혼식장은 결혼 이벤트의 전제 시설이며, 미술관에서는 미술품을 감상하는 것이 가능합니다.
				PRINTW
		ENDSELECT
		RESTART
ENDSELECT



